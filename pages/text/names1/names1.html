<!DOCTYPE html> <!-- vim: set foldmethod=marker :-->
<!--
Process this file with cog:

    $ pip install -r requirements.txt
    $ cog.py -r names.html

-->
<html>
<!-- *** Head stuff {{{ -->
<title>Python Names</title>
<meta charset="utf-8" />

    <!-- *** Includes {{{ -->
    <!-- Slippy core file and dependencies -->
    <script type="text/javascript" src="slippy/jquery.min.js"></script>
    <script type="text/javascript" src="slippy/jquery.history.js"></script>
    <script type="text/javascript" src="slippy/slippy.js"></script>
    <!-- Slippy structural styles -->
    <link type="text/css" rel="stylesheet" href="slippy/slippy.css"/>
    <!-- Slippy theme -->
    <link type="text/css" rel="stylesheet" href="slippy/slippy-pure.css"/>

    <!-- Highlight, for syntax coloring. -->
    <script type="text/javascript" src="highlight/highlight.pack.js"></script>
    <link rel="stylesheet" href="highlight/vs.css">

    <script type="text/javascript" src="lineselect.js"></script>

    <!-- http://html.adobe.com/edge/webfonts/ -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>
    <!-- }}} -->

    <!-- *** Init code {{{ -->
    <script type="text/javascript">
        $(function() {
            if ($("body.slides").length) {
                $(".slide").slippy({
                    // settings go here
                    // possible values are:
                    //  - animLen, duration for default animations (0 = disabled)
                    //  - animInForward, receives a slide and animates it
                    //  - animInRewind, receives a slide and animates it
                    //  - animOutForward, receives a slide and animates it
                    //  - animOutRewind, receives a slide and animates it
                    //  - baseWidth, defines the base for img resizing, if you don't want only
                    //    full-width images, specify this as the pixel width of a slide so that
                    //    images are scaled properly (default is 620px wide)
                    //  - ratio, defines the width/height ratio of the slides, defaults to 1.3 (620x476)
                    //  - margin, the fraction of screen to use as slide margin, defaults to 0.15
                    margin: 0.04,
                    incrementalBefore: function (el) {
                        $(el).css({ opacity: 0.01 });
                    },
                    animInForward: function (slide) {
                        var slide = $(slide);
                        if (slide.hasClass("fadein")) {
                            slide.css('opacity', '0').css('left', '50%').animate({opacity: '1'}, 350);
                        }
                        else {
                            slide.css('left', '150%').animate({left: '50%'}, 350);
                        }
                        slide.find(".incremental").css({opacity:0});    // IDK why this hides them, but 0.01 does not.
                    },
                    animOutForward: function(slide) {
                        var slide = $(slide);
                        if (slide.hasClass("fadeout")) {
                            slide.animate({opacity: '1'}, 350).animate({left: '-50%'}, 0);
                        }
                        else {
                            slide.animate({left: '-50%'}, 350);
                        }
                    }
                });
            }

            $('pre').each(function (i, e) {
                hljs.highlightBlock(e, '    ');
            });

            $('pre').each(function (i, e) {
                var $e = $(e);
                var h = $e.html();
                h = h.replace(/\n\n/g, "\n \n");
                h = h.replace(/\n/g, "</span>\n<span class='line'>");
                h = "<span class='line'>" + h + "</span>";
                $e.html(h);
            });

            $("div.slide").lineselect({ lines: "pre span.line" });

            // Pre-select lines based on a select= attribute.
            $('pre').each(function (i, e) {
                var $e = $(e);
                var select = $e.attr("select");
                if (select) {
                    $e.lineselect(select);
                }
            });
        });
    </script>
    <!-- }}} -->

    <!-- *** Custom style for this deck {{{ -->
    <style type="text/css">
        body, html {
            background: #222;
            font-family: "Open Sans", sans-serif;
        }

        div.text {
            display: none;
        }

        .slide {
            font-family: "Open Sans", sans-serif;
            font-weight: 600;
            margin: 1em;
            border: 1px solid #ccc;
            border-radius: 1em;
            background: #fffaf0;
            font-size: 150%;
        }
        h1, h2, h3, h4 {
            font-family: "Open Sans", sans-serif;
            font-weight: 700;
            line-height: 1.5;
            text-align: left;
            word-spacing: .1em;
        }

        .slide.title h1 {
            font-family: "Open Sans", sans-serif;
            font-weight: 800;
            padding-top: 2em;
            font-size: 200%;
            text-align: center;
        }
        .slide.title h2 {
            text-align: center;
            font-size: 125%;
            color: #666;
            margin-top: 2em;
        }
        .slide.section {
            background-color: #ff8;
        }
        .slide.section h1 {
            font-family: "Open Sans", sans-serif;
            font-weight: 700;
            margin-top: 3em;
            font-size: 200%;
            text-align: center;
        }
        .slide.section h2 {
            text-align: center;
            font-size: 125%;
            color: #666;
            margin-top: 2em;
        }
        .slide p {
            text-align: left;
            margin-top: 1em;
        }
        .slide .footer {
            font-weight: 400;
            color: #666;
        }
        .slide .punct {
            padding: 0 .2em;
            color: #aaa;
        }

        .slide p.generic {
            font-family: serif;
            margin-top: .5em;
        }

        .slide pre {
            font-family: Consolas, monaco, monospace;
            margin-top: 1em;
            background: #ccf;
            padding: .3em .35em;
            line-height: 1.15;
        }

        .slide pre.python {
            background: #cfc;
        }

        pre .selected {
            background: #fff;
            border: .15em solid #f66;
            padding: .15em .15em .05em .15em;
            margin: -.30em -.30em -.20em -.30em;
        }

        html.phantompng pre .selected {
            border-width: 0;
            background: inherit;
        }

        .slide li {
            list-style: none;
            margin-top: .5em;
            position:relative;
        }
        .slide li:before {
            content: '';
            display: block;
            position: absolute;
            width: .3em;
            height: .3em;
            border-radius: .3em;
            left: -1em;
            top: .4em;
            background-color: #999;
        }

        a:visited, a:active, a:link, a {
            color: #0000CC;
            cursor: pointer;
        }
        body.notes {
            overflow: auto;
            background: white;
        }
        .notes .slide {
            position: static;
            left: auto;
            top: auto;
            width: 20em;
            height: auto;
            border: 2px solid #888;
            padding: 1em 2em;
            margin: 1em 1em;
            font-size: 100%;
        }
        .notes img {
            display: none;
        }

        .overlay_container {
            padding-top: 1em;
        }
        .overlay {
            position: relative;
            width: 100%;
            height: 0;
        }
        .lefthalf {
            position: absolute;
            top: 0;
            left: 0;
        }
        .righthalf {
            position: absolute;
            top: 0;
            right: 0;
        }
        .tophalf {
            position: relative;
            width: 100%;
        }
        .bottomhalf {
            position: relative;
            width: 100%;
        }
        .opaque {
            background: #fffaf0;
        }
        .slide pre.tophalf {
            margin-top: 0;  /* No idea why I need this... :( :( */
        }
        span.myth {
            display: inline-block;
            margin-left: -3.5em;
            width: 3.5em;
            color: red;
            font-weight: bold;
            text-transform: uppercase;
        }
        h1.myth {
            margin-left: 3.5em;
        }

    </style>
    <!-- }}} -->

<!-- *** Cog prolog and definition {{{ -->
<!--[[[cog
    from contextlib import contextmanager
    import random
    import string

    import cog
    import cupid.pyfig

    # The defaults for all PyFigs in this file.
    pyfig_defaults = dict(
        draw_grid=False,
        label_frames=False,
        y=25,
        name_right=200,
        val_gap=75,
        name_shape="tag",
        )

    def make_pyfig(**kwargs):
        """Construct a PyFig using our defaults."""
        pyfig_kwargs = dict(pyfig_defaults)
        pyfig_kwargs.update(kwargs)
        return cupid.pyfig.PyFig(**pyfig_kwargs)

    @contextmanager
    def vim_fold(label):
        cog.outl("<!-" "- " + label + " {" "{{ -" "->")
        yield
        cog.outl("<!-" "- }" "}} -" "->")

    def pyfig_animation(code, figfunc, lines=None):
        num_lines = len(code.rstrip().splitlines())
        lines = lines or range(1, num_lines+1)
        with vim_fold("Animation"):
            cog.outl('''<div class="overlay_container">''')
            for frame, line in enumerate([None]+lines):
                div_class = "overlay"
                if frame > 0:
                    div_class += " incremental"
                cog.outl('''<div class="{}">'''.format(div_class))
                select = ''
                if line is not None:
                    if isinstance(line, int):
                        lines = str(line)
                    else:
                        lines = ",".join(map(str, line))
                    select = ' select="{}"'.format(lines)
                cog.outl('''<pre class="python tophalf"{}>'''.format(select))
                cog.out(code)
                cog.outl('''</pre>''')
                if frame > 0:
                    cog.outl('''<div class="opaque bottomhalf" style="text-align:center">''')
                    figfunc(frame)
                    cog.outl('''</div>''')
                cog.outl('''</div>''')
            cog.outl('''</div>''')

    def auto_name(fig, text, **args):
        width = 50 + 12*len(text)
        return fig.name(pos=fig.next_name(), size=(width,50), text=text, **args)
        
]]]-->
<!--[[[end]]] }}}-->

<!-- *** Cupid-supplied SVG styling {{{ -->
<style>
<!--[[[cog
cog.outl(cupid.pyfig.PyFig.CSS, dedent=True)
]]]-->

svg {
    stroke: black;
    fill: white;
}

svg text {
    stroke: none;
    fill: black;
}

svg .arrow {
    fill: none;
    stroke: black;
    stroke-width: 1;
}

svg .highlight {
    stroke-width: 5;
    stroke: #f00;
    fill: none;
    opacity: 0.5;
}

svg .grid {
    stroke: #8ff; stroke-width: 1; fill: none;
}
svg .grid .half {
    stroke-dasharray: 12.5 12.5;
    stroke-dashoffset: 6.25;
    stroke-dasharray: 2 2;
    stroke-dashoffset: 1;
}
svg .grid .tiny {
    stroke-dasharray: 1 2;
    stroke: #cff;
}
svg .grid .number {
    font-size: .5em;
    stroke: none;
    fill: #0cc;
}

svg .framenum {
    font-size: .75em;
    stroke: none;
    fill: #f00;
}

svg .name {
    stroke: black;
    stroke-width: 2;
    fill: #ddd;
}

svg .value {
    stroke: black;
    stroke-width: 1;
    fill: white;
}

svg .list {
    stroke: black;
    stroke-width: 1;
    fill: white;
}

svg .frame {
    stroke-width: 3;
    stroke: #666;
    stroke-dasharray: 10 10;
    fill: none;
}

svg text.framelabel {
    font-size: 75%;
    font-family: monospace;
}

<!--[[[end]]]-->
</style>
<!-- }}} -->

<!-- *** Custom SVG styling {{{ -->
<style>
svg text.framelabel {
    font-family: inherit !important;
}

html.phantompng svg .highlight {
    display: none;
}
</style>
<!-- }}} -->

</head>
<!-- }}} -->
<body class="slides">

<div class="slide title" data-layout="clean">
    <h1>Facts and Myths about Names and Values</h1>
    <h2>Ned Batchelder<br/><span class="punct">@</span>nedbat</h2>
    <h2><span class="punct">http://</span>bit.ly<span class="punct">/</span>pynames1</h2>
</div>

<div class="text"><!-- {{{ -->

<p>This talk is about some fundamental concepts in Python: names and
values.</p>

<p>These lessons apply to both Python 2 and Python 3.</p>

</div><!-- }}} -->


<div class="slide">
    <h1>Python is simple</h1>
    <ul>
    <li class="incremental">Works like other languages</li>
    <li class="incremental">... until it doesn't</li>
    <li class="incremental">Mechanisms are simple</li>
    <li class="incremental">... but the effects can be surprising</li>
    <li class="incremental">Names, values, assignment, mutability</li>
    </ul>
</div>

<div class="text"><!-- {{{ -->
    <p>Python is a very approachable language.  Often it works just as you 
    expect if you come to it from other languages.  But you might suddenly
    encounter surprising behavior.</p>

    <p>The underlying mechanisms of Python are often quite simple, but their
    combined effects might not be what you expect.  By understanding the
    mechanisms, you can reason about their effects.</p>

    <p>Today I'll be talking about names, values, assignment, and mutability.</p> 

</div><!-- }}} -->


<div class="slide">
    <h1>Names refer to values</h1>
    <p>Assignment: make this name refer to that value</p>
    <!--[[[cog
    code = '''\
        x = 23
        print(x)        # 23
        '''

    def figure(frame):
        fig = make_pyfig(size=(500,400), frame_num=frame)

        x = auto_name(fig, "x")
        c = fig.int(pos=fig.val_for_name(x), text="23")
        fig.reference(x, c)

        cog.outl(fig.tostring())

    pyfig_animation(code, figure, [])
    ]]]-->
    <!-- Animation {{{ -->
    <div class="overlay_container">
    <div class="overlay">
    <pre class="python tophalf">
        x = 23
        print(x)        # 23
        </pre>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="1">
        x = 23
        print(x)        # 23
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id1" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="138,25 193.75,25 200,50 193.75,75 138,75" /><text dy=".3em" text-anchor="middle" x="165.875" y="50">x</text><circle class="int value" cx="300" cy="50" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="50">23</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id1)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        x = 23
        print(x)        # 23
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id2" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="138,25 193.75,25 200,50 193.75,75 138,75" /><text dy=".3em" text-anchor="middle" x="165.875" y="50">x</text><circle class="int value" cx="300" cy="50" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="50">23</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id2)" /></svg>
    </div>
    </div>
    </div>
    <!-- }}} -->
    <!--[[[end]]]-->
</div>

<div class="text"><!-- {{{ -->
<p>As in many programming languages, a Python assignment statement associates a
    symbolic name on the left-hand side with a value on the right-hand side.
    In Python, we say that names refer to values, or a name is a reference to a
    value:</p>

<code lang="py">
x = 23
</code>

<p>Now the name "x" refers to the value 23.  The next time we use the name x,
    we'll get the value 23:</p> 

<code lang='python'>
print(x)        # prints 23
</code>

<p>Another way people describe this is, x is bound to 23.</p>

<p>Exactly how the name refers to the value isn't really important.  If you're
    experienced with the C language, you might like to think of it as a
    pointer, but if that means nothing to you then don't worry about it.</p>

<p>To help explain what's going on, I'll use diagrams.  A gray rectangular tag-like shape is a
    name, with an arrow pointing to its value. The slide shows the name x referring to an
    integer 23.</p>

</div><!-- }}} -->


<div class="slide">
    <h1>Many names can refer to one value</h1>
    <!--[[[cog
    code = '''\
        x = 23
        y = x
        '''

    def figure(frame):
        fig = make_pyfig(size=(500,400), frame_num=frame)

        n_x = auto_name(fig, "x")
        i_23 = fig.int(pos=fig.val_for_name(n_x), text="23")
        fig.reference(n_x, i_23)
        n_y = auto_name(fig, "y", rise=2)
        c_23 = (n_x.cy + n_y.cy) / 2
        fig.reference(n_y, i_23)
        cog.outl(fig.tostring())

    pyfig_animation(code, figure)
    ]]]-->
    <!-- Animation {{{ -->
    <div class="overlay_container">
    <div class="overlay">
    <pre class="python tophalf">
        x = 23
        y = x
        </pre>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="1">
        x = 23
        y = x
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id3" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="138,25 193.75,25 200,50 193.75,75 138,75" /><text dy=".3em" text-anchor="middle" x="165.875" y="50">x</text><circle class="int value" cx="300" cy="50" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="50">23</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id3)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        x = 23
        y = x
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id4" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="138,25 193.75,25 200,50 193.75,75 138,75" /><text dy=".3em" text-anchor="middle" x="165.875" y="50">x</text><circle class="int value" cx="300" cy="50" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="50">23</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id4)" /><polygon class="name" points="138,100 193.75,100 200,125 193.75,150 138,150" /><text dy=".3em" text-anchor="middle" x="165.875" y="125">y</text><path class="arrow" d="M 200,125 C 226,125 230,112 237,87 C 244,62 248,50 275,50" fill="none" marker-end="url(#id4)" /></svg>
    </div>
    </div>
    </div>
    <!-- }}} -->
    <!--[[[end]]]-->
</div>

<div class="text"><!-- {{{ -->
<p>There's no rule that says a value can only have one name.  An assignment
    statement can make a second (or third, ...) name refer to the same
    value.</p>

<code lang="py">
x = 23
y = x
</code>

<p>Now x and y both refer to the same value</p>

<p>Neither x or y is the "real" name.  They have equal status: each refers to
    the value in exactly the same way.</p>

</div><!-- }}} -->


<div class="slide">
    <h1>Names are reassigned independently</h1>
    <!--[[[cog
    code = '''\
        x = 23
        y = x
        x = 12
        '''

    def figure(frame):
        fig = make_pyfig(size=(500,400), frame_num=frame)

        n_x = auto_name(fig, "x", set=3)
        fig.next_name()  # Burn a name to space them out.
        n_y = auto_name(fig, "y", rise=2)
        c_23 = (n_x.cy + n_y.cy) / 2
        i_23 = fig.int(left=(fig.val_left, c_23), text="23")
        fig.reference(n_x, i_23)
        fig.reference(n_y, i_23)

        n_x = fig.name(center=n_x.center, size=n_x.size, text="x")
        i_12 = fig.int(pos=fig.val_for_name(n_x), text="12", rise=3)
        fig.reference(n_x, i_12)

        cog.outl(fig.tostring())

    pyfig_animation(code, figure)
    ]]]-->
    <!-- Animation {{{ -->
    <div class="overlay_container">
    <div class="overlay">
    <pre class="python tophalf">
        x = 23
        y = x
        x = 12
        </pre>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="1">
        x = 23
        y = x
        x = 12
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id5" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="138,25 193.75,25 200,50 193.75,75 138,75" /><text dy=".3em" text-anchor="middle" x="165.875" y="50">x</text><circle class="int value" cx="300" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="125">23</text><path class="arrow" d="M 200,50 C 226,50 230,62 237,87 C 244,112 248,125 275,125" fill="none" marker-end="url(#id5)" /><polygon class="name" points="138,25 193.75,25 200,50 193.75,75 138,75" /><text dy=".3em" text-anchor="middle" x="165.875" y="50">x</text></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        x = 23
        y = x
        x = 12
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id6" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="138,25 193.75,25 200,50 193.75,75 138,75" /><text dy=".3em" text-anchor="middle" x="165.875" y="50">x</text><polygon class="name" points="138,175 193.75,175 200,200 193.75,225 138,225" /><text dy=".3em" text-anchor="middle" x="165.875" y="200">y</text><circle class="int value" cx="300" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="125">23</text><path class="arrow" d="M 200,50 C 226,50 230,62 237,87 C 244,112 248,125 275,125" fill="none" marker-end="url(#id6)" /><path class="arrow" d="M 200,200 C 226,200 230,187 237,162 C 244,137 248,125 275,125" fill="none" marker-end="url(#id6)" /><polygon class="name" points="138,25 193.75,25 200,50 193.75,75 138,75" /><text dy=".3em" text-anchor="middle" x="165.875" y="50">x</text></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="3">
        x = 23
        y = x
        x = 12
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id7" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="138,175 193.75,175 200,200 193.75,225 138,225" /><text dy=".3em" text-anchor="middle" x="165.875" y="200">y</text><circle class="int value" cx="300" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="125">23</text><path class="arrow" d="M 200,200 C 226,200 230,187 237,162 C 244,137 248,125 275,125" fill="none" marker-end="url(#id7)" /><polygon class="name" points="138,25 193.75,25 200,50 193.75,75 138,75" /><text dy=".3em" text-anchor="middle" x="165.875" y="50">x</text><circle class="int value" cx="300" cy="50" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="50">12</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id7)" /></svg>
    </div>
    </div>
    </div>
    <!-- }}} -->
    <!--[[[end]]]-->
</div>

<div class="text"><!-- {{{ -->
<p>If two names refer to the same value, this doesn't magically link the
    two names.  Reassigning one of them won't reassign the other also:</p>

<code lang="py">
x = 23
y = x
x = 12
</code>

<p>When we said "y = x", that doesn't mean that they will always be the
    same forever.  Reassigning x leaves y alone.  Imagine the chaos if
    it didn't!</p>

<p>Also important to note is that Python has no mechanism for making a name
    refer to another name.  That is, there is no way to make y be a permanent
    alias for x no matter how x is reassigned.</p>

</div><!-- }}} -->


<div class="slide">
    <h1>Values live until no references</h1>
    <!--[[[cog
    code = '''\
        x = "hello"
        x = "world"
        '''

    def figure(frame):
        fig = make_pyfig(size=(500,400), frame_num=frame)

        n_x = auto_name(fig, "x", set=2)
        n_hidden = auto_name(fig, "", set=0)
        s_hello = fig.string(pos=fig.val_for_name(n_x), size=(120,50), text=repr("hello"), set=2, fade=1)
        fig.reference(n_x, s_hello)
        n_x = fig.name(center=n_x.center, size=n_x.size, text="x", rise=2)
        s_hello = fig.string(pos=fig.val_for_name(n_hidden), size=(120, 50), text=repr("world"), rise=2)
        fig.reference(n_x, s_hello)

        cog.outl(fig.tostring())

    pyfig_animation(code, figure, [1, 2, 2])
    ]]]-->
    <!-- Animation {{{ -->
    <div class="overlay_container">
    <div class="overlay">
    <pre class="python tophalf">
        x = "hello"
        x = "world"
        </pre>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="1">
        x = "hello"
        x = "world"
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id8" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="138,25 193.75,25 200,50 193.75,75 138,75" /><text dy=".3em" text-anchor="middle" x="165.875" y="50">x</text><rect class="string value" height="50" rx="25" ry="25" width="120" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">'hello'</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id8)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        x = "hello"
        x = "world"
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id9" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><rect class="string value" height="50" opacity="0.25" rx="25" ry="25" width="120" x="275" y="25" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="335" y="50">'hello'</text><polygon class="name" points="138,25 193.75,25 200,50 193.75,75 138,75" /><text dy=".3em" text-anchor="middle" x="165.875" y="50">x</text><rect class="string value" height="50" rx="25" ry="25" width="120" x="275" y="100" /><text dy=".3em" text-anchor="middle" x="335" y="125">'world'</text><path class="arrow" d="M 200,50 C 226,50 230,62 237,87 C 244,112 248,125 275,125" fill="none" marker-end="url(#id9)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        x = "hello"
        x = "world"
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id10" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="138,25 193.75,25 200,50 193.75,75 138,75" /><text dy=".3em" text-anchor="middle" x="165.875" y="50">x</text><rect class="string value" height="50" rx="25" ry="25" width="120" x="275" y="100" /><text dy=".3em" text-anchor="middle" x="335" y="125">'world'</text><path class="arrow" d="M 200,50 C 226,50 230,62 237,87 C 244,112 248,125 275,125" fill="none" marker-end="url(#id10)" /></svg>
    </div>
    </div>
    </div>
    <!-- }}} -->
    <!--[[[end]]]-->
</div>

<div class="text"><!-- {{{ -->
<p>Python keeps track of how many references each value has, and automatically
    cleans up values that have none.  This is called "garbage collection,"
    and means that you don't have to get rid of values, they go away by
    themselves when they are no longer needed.</p>

<p>Exactly how Python keeps track is an implementation detail, but if you hear
    the term "reference counting," that's an important part of it.  Sometimes
    cleaning up a value is called reclaiming it.</p>

</div><!-- }}} -->


<div class="slide">
    <h1>Assignment never copies data</h1>
    <!--[[[cog
    code = '''\
        nums = [1, 2, 3]
        other = nums
        '''

    def figure(frame):
        fig = make_pyfig(size=(500,400), frame_num=frame)

        n_nums = auto_name(fig, "nums")
        l_nums = fig.list(texts="123", pos=fig.val_for_name(n_nums))
        fig.reference(n_nums, l_nums[0])

        n_other = auto_name(fig, "other", rise=2)
        fig.reference(n_other, l_nums[0])

        cog.outl(fig.tostring())

    pyfig_animation(code, figure)
    ]]]-->
    <!-- Animation {{{ -->
    <div class="overlay_container">
    <div class="overlay">
    <pre class="python tophalf">
        nums = [1, 2, 3]
        other = nums
        </pre>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="1">
        nums = [1, 2, 3]
        other = nums
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id11" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id11)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        nums = [1, 2, 3]
        other = nums
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id12" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id12)" /><polygon class="name" points="90,100 193.75,100 200,125 193.75,150 90,150" /><text dy=".3em" text-anchor="middle" x="141.875" y="125">other</text><path class="arrow" d="M 200,125 C 226,125 230,112 237,87 C 244,62 248,50 275,50" fill="none" marker-end="url(#id12)" /></svg>
    </div>
    </div>
    </div>
    <!-- }}} -->
    <!--[[[end]]]-->
</div>

<div class="text"><!-- {{{ -->

<p>An important fact about assignment: assignment never copies data.</p>

<p>When values have more than one name, it's easy to get confused and think of
    it as two names and two values:</p>

<code lang="py">
x = 23
y = x
# "Now I have two values: x and y!"
# NO: you have two names, but only one value.
</code>

<p>Assigning a value to a name never copies the data, it never makes a new
    value.  Assignment just makes the name on the left refer to the value on
    the right.  In this case, we have only one 23, and x and y both refer to
    it, just as we saw in the last diagrams.</p>

<p>Things get more interesting when we have more complicated values, like a
    list:</p>

<code lang="py">
nums = [1, 2, 3]
</code>

<p>Now if we assign nums to another name, we'll have two names referring to the
    same list:</p>

<code lang="py">
nums = [1, 2, 3]
other = nums
</code>

<p>Remember: assignment never makes new values, and it never copies data.  This
    assignment statement doesn't magically turn my list into two lists.</p>

<p>At this point, we have one list, referred to by two names, which can lead
    to a big surprise.</p>

</div><!-- }}} -->


<div class="slide">
    <h1>Changes are visible through all names</h1>
    <!--[[[cog
    code = '''\
        nums = [1, 2, 3]
        other = nums
        nums.append(4)
        print(other)        # [1, 2, 3, 4] !!!
        '''

    def figure(frame):
        fig = make_pyfig(size=(500,400), frame_num=frame)

        n_nums = auto_name(fig, "nums")
        l_nums = fig.list(texts="123", pos=fig.val_for_name(n_nums))
        fig.reference(n_nums, l_nums[0])

        n_other = auto_name(fig, "other", rise=2)
        fig.reference(n_other, l_nums[0])

        l_nums = fig.list(texts="1234", center=l_nums[0].center, rise=4)
        fig.highlight(box=n_nums, rise=3, set=5)
        fig.highlight(box=l_nums[-1], rise=4, set=5)

        fig.highlight(box=n_other, rise=5)
        fig.highlight(box=l_nums.box, rise=6)
        cog.outl(fig.tostring())

    pyfig_animation(code, figure, [1, 2, 3, 3, 4, 4])
    ]]]-->
    <!-- Animation {{{ -->
    <div class="overlay_container">
    <div class="overlay">
    <pre class="python tophalf">
        nums = [1, 2, 3]
        other = nums
        nums.append(4)
        print(other)        # [1, 2, 3, 4] !!!
        </pre>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="1">
        nums = [1, 2, 3]
        other = nums
        nums.append(4)
        print(other)        # [1, 2, 3, 4] !!!
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id13" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id13)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        nums = [1, 2, 3]
        other = nums
        nums.append(4)
        print(other)        # [1, 2, 3, 4] !!!
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id14" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id14)" /><polygon class="name" points="90,100 193.75,100 200,125 193.75,150 90,150" /><text dy=".3em" text-anchor="middle" x="141.875" y="125">other</text><path class="arrow" d="M 200,125 C 226,125 230,112 237,87 C 244,62 248,50 275,50" fill="none" marker-end="url(#id14)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="3">
        nums = [1, 2, 3]
        other = nums
        nums.append(4)
        print(other)        # [1, 2, 3, 4] !!!
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id15" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id15)" /><polygon class="name" points="90,100 193.75,100 200,125 193.75,150 90,150" /><text dy=".3em" text-anchor="middle" x="141.875" y="125">other</text><path class="arrow" d="M 200,125 C 226,125 230,112 237,87 C 244,62 248,50 275,50" fill="none" marker-end="url(#id15)" /><rect class="highlight" height="60" rx="5" ry="5" width="108" x="97" y="20" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="3">
        nums = [1, 2, 3]
        other = nums
        nums.append(4)
        print(other)        # [1, 2, 3, 4] !!!
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id16" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id16)" /><polygon class="name" points="90,100 193.75,100 200,125 193.75,150 90,150" /><text dy=".3em" text-anchor="middle" x="141.875" y="125">other</text><path class="arrow" d="M 200,125 C 226,125 230,112 237,87 C 244,62 248,50 275,50" fill="none" marker-end="url(#id16)" /><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><rect class="list" height="50" width="40" x="395" y="25" /><text dy=".3em" text-anchor="middle" x="415" y="50">4</text><rect class="highlight" height="60" rx="5" ry="5" width="108" x="97" y="20" /><rect class="highlight" height="60" rx="5" ry="5" width="50" x="390" y="20" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="4">
        nums = [1, 2, 3]
        other = nums
        nums.append(4)
        print(other)        # [1, 2, 3, 4] !!!
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id17" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id17)" /><polygon class="name" points="90,100 193.75,100 200,125 193.75,150 90,150" /><text dy=".3em" text-anchor="middle" x="141.875" y="125">other</text><path class="arrow" d="M 200,125 C 226,125 230,112 237,87 C 244,62 248,50 275,50" fill="none" marker-end="url(#id17)" /><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><rect class="list" height="50" width="40" x="395" y="25" /><text dy=".3em" text-anchor="middle" x="415" y="50">4</text><rect class="highlight" height="60" rx="5" ry="5" width="120" x="85" y="95" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="4">
        nums = [1, 2, 3]
        other = nums
        nums.append(4)
        print(other)        # [1, 2, 3, 4] !!!
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id18" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id18)" /><polygon class="name" points="90,100 193.75,100 200,125 193.75,150 90,150" /><text dy=".3em" text-anchor="middle" x="141.875" y="125">other</text><path class="arrow" d="M 200,125 C 226,125 230,112 237,87 C 244,62 248,50 275,50" fill="none" marker-end="url(#id18)" /><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><rect class="list" height="50" width="40" x="395" y="25" /><text dy=".3em" text-anchor="middle" x="415" y="50">4</text><rect class="highlight" height="60" rx="5" ry="5" width="120" x="85" y="95" /><rect class="highlight" height="60" rx="5" ry="5" width="170" x="270" y="20" /></svg>
    </div>
    </div>
    </div>
    <!-- }}} -->
    <!--[[[end]]]-->
</div>

<div class="text"><!-- {{{ -->

<p>Here we create our list again, and assign it to both nums and other.  Then
we append another value to nums.  When we print other, it has the 4 appended to
it.  This suprises many people.</p>

<p>Because there was only ever one list, both names see the change. The
assignment to other didn't make a copy of the list, and the append operation
didn't copy the list before appending the value.  There is only one list, and
if you modify it through one of its names, the change will be visible through
all of the names.</p>

</div><!-- }}} -->


<div class="slide">
    <h1>Mutable aliasing!</h1>
    <ul>
        <li class="incremental">A mutable value</li>
        <li class="incremental">more than one name</li>
        <li class="incremental">the value changes</li>
        <li class="incremental">all names see the change!</li>
    </ul>
</div>

<div class="text"><!-- {{{ -->
<p>This is an important enough effect, and one that is surprising to enough
people, that it bears repeating.  If a mutable value has more than one name,
and the value changes, then all names see the change.</p>

<p>In the small code samples we've been looking at, it's easy to see where
there are two names for one list.  But as we'll see with function calls, the
two names could be quite far apart, and the change in value very far from the
surprise discovery.</p>

<p>I've used the word "mutable" here for the first time.  It means a value that
can change in place.  In our code sample, the name nums refers to the same object
through all four lines of code.  But the value that object contains has
changed.</p>

</div><!-- }}} -->

<div class="slide">
    <h1>Immutable values can't alias</h1>
    <p>Immutable types: ints, floats, strings, tuples</p>
    <!--[[[cog
    code = '''\
        x = "hello"
        y = x
        x = x + " there"
        '''

    def figure(frame):
        fig = make_pyfig(size=(500,400), frame_num=frame)

        n_x = auto_name(fig, "x", set=4)
        n_y = auto_name(fig, "y", rise=2)
        s_hello = fig.string(pos=fig.val_for_name(n_y), size=(120,50), text=repr("hello"))
        fig.reference(n_x, s_hello)
        fig.reference(n_y, s_hello)
        s_there = fig.string(pos=fig.val_for_name(n_x), size=(200, 50), text=repr("hello there"), rise=3)
        n_x = fig.name(center=n_x.center, size=n_x.size, text="x", rise=4)
        fig.reference(n_x, s_there)
        cog.outl(fig.tostring())

    pyfig_animation(code, figure, [1, 2, 3, 3])
    ]]]-->
    <!-- Animation {{{ -->
    <div class="overlay_container">
    <div class="overlay">
    <pre class="python tophalf">
        x = "hello"
        y = x
        x = x + " there"
        </pre>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="1">
        x = "hello"
        y = x
        x = x + " there"
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id19" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="138,25 193.75,25 200,50 193.75,75 138,75" /><text dy=".3em" text-anchor="middle" x="165.875" y="50">x</text><rect class="string value" height="50" rx="25" ry="25" width="120" x="275" y="100" /><text dy=".3em" text-anchor="middle" x="335" y="125">'hello'</text><path class="arrow" d="M 200,50 C 226,50 230,62 237,87 C 244,112 248,125 275,125" fill="none" marker-end="url(#id19)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        x = "hello"
        y = x
        x = x + " there"
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id20" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="138,25 193.75,25 200,50 193.75,75 138,75" /><text dy=".3em" text-anchor="middle" x="165.875" y="50">x</text><polygon class="name" points="138,100 193.75,100 200,125 193.75,150 138,150" /><text dy=".3em" text-anchor="middle" x="165.875" y="125">y</text><rect class="string value" height="50" rx="25" ry="25" width="120" x="275" y="100" /><text dy=".3em" text-anchor="middle" x="335" y="125">'hello'</text><path class="arrow" d="M 200,50 C 226,50 230,62 237,87 C 244,112 248,125 275,125" fill="none" marker-end="url(#id20)" /><path class="arrow" d="M 200,125 C 218,125 218,125 237,125 C 256,125 256,125 275,125" fill="none" marker-end="url(#id20)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="3">
        x = "hello"
        y = x
        x = x + " there"
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id21" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="138,25 193.75,25 200,50 193.75,75 138,75" /><text dy=".3em" text-anchor="middle" x="165.875" y="50">x</text><polygon class="name" points="138,100 193.75,100 200,125 193.75,150 138,150" /><text dy=".3em" text-anchor="middle" x="165.875" y="125">y</text><rect class="string value" height="50" rx="25" ry="25" width="120" x="275" y="100" /><text dy=".3em" text-anchor="middle" x="335" y="125">'hello'</text><path class="arrow" d="M 200,50 C 226,50 230,62 237,87 C 244,112 248,125 275,125" fill="none" marker-end="url(#id21)" /><path class="arrow" d="M 200,125 C 218,125 218,125 237,125 C 256,125 256,125 275,125" fill="none" marker-end="url(#id21)" /><rect class="string value" height="50" rx="25" ry="25" width="200" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">'hello there'</text></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="3">
        x = "hello"
        y = x
        x = x + " there"
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id22" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="138,100 193.75,100 200,125 193.75,150 138,150" /><text dy=".3em" text-anchor="middle" x="165.875" y="125">y</text><rect class="string value" height="50" rx="25" ry="25" width="120" x="275" y="100" /><text dy=".3em" text-anchor="middle" x="335" y="125">'hello'</text><path class="arrow" d="M 200,125 C 218,125 218,125 237,125 C 256,125 256,125 275,125" fill="none" marker-end="url(#id22)" /><rect class="string value" height="50" rx="25" ry="25" width="200" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">'hello there'</text><polygon class="name" points="138,25 193.75,25 200,50 193.75,75 138,75" /><text dy=".3em" text-anchor="middle" x="165.875" y="50">x</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id22)" /></svg>
    </div>
    </div>
    </div>
    <!-- }}} -->
    <!--[[[end]]]-->
</div>

<div class="text"><!-- {{{ -->
<p>Not all values in Python are mutable.  Numbers, strings, and tuples are all
immutable.  There is no operation on any of these values that can change them
in place.  All you can do is make new object from old objects.</p>

<p>In our three line code sample here, x refers to the string "hello".  Then y
also refers to that string.  In the last line, the + operator doesn't extend
the existing string, it creates an entirely new string by concatenating "hello"
and " there".  Then x refers to that new string.</p>

<p>The old string is unaffected.  This is guaranteed with strings because they
are immutable.  No method on a string modifies the string, they all return new
strings.</p>

<p>The aliasing problem can't happen with immutable values because one of the
conditions is impossible: you can't change the value in place.</p>

</div><!-- }}} -->

<div class="slide">
    <h1>"Change" is unclear</h1>
    <div class="incremental">
        <p>Changing an int: <b>rebinding</b></p>
        <pre class="python">
        x = x + 1
        </pre>
    </div>
    <div class="incremental">
        <p>Changing a list: <b>mutating</b></p>
        <pre class="python">
        nums.append(7)
        </pre>
    </div>
    <div class="incremental">
        <p>Can also <b>rebind</b> lists:</p>
        <pre class="python">
        nums = nums + [7]
        </pre>
    </div>
    <div class="incremental">
        <p>Can't mutate an int: ints are <b>immutable</b></p>
    </div>
</div>

<div class="text"><!-- {{{ -->

<p>One of the difficulties in talking about these concepts is the word
"change".  Informally, we say that adding 1 to x "changes" x:</p>

<code lang="py">
x = x + 1
</code>

<p>We also say that that appending to num "changes" num:</p>

<code lang="py">
num.append(7)       # changes num
</code>

<p>But these are two very different operations.  The first is
<strong>rebinding</strong> x.  x+1 creates an entirely new object, and then the
assignment statement makes x refer to it.  Appending to num is <strong>mutating</strong>
num.  The name num still refers to the same object, but that object has been 
modified, its value has been updated in-place.</p>

<p>The words "rebinding" and "mutating" are too awkward to use all the time,
but when we're doing a close reading of a piece of code to understand how it
works, they can be very useful for distinguishing between the two different
kinds of change.</p>

<p>Of course, you can also rebind a name that refers to a list.  This is another
way to have nums become a list with a 7 on the end:</p>

<code lang="py">
nums = nums + [7]
</code>

<p>As with integers, the + operator here makes an entirely new list, and then
the name nums is rebound to it.</p>

<p>On the other hand, there is no way to mutate a number.  They are immutable,
literally they cannot be mutated.</p>

</div><!-- }}} -->

<div class="slide">
    <h1>Mutable and immutable are assigned the same</h1>
    <ul>
    <li class="incremental">Assignment is the same for <b>all</b> values.</li>
    <li class="incremental">Aliasing can make it seem different.</li>
    </ul>
</div>

<div class="text"><!-- {{{ -->

<p>One of the common misconceptions about Python is that assignment works
differently for mutable values than for immutable values.  This is not true.
Assignment is very simple: it makes the name on the left side refer to the
value on the right side.</p>

<p>When people say that assignment works differently, they are misdiagnosing the
mutable aliasing problem.  They see two different effects in two pieces of
code, and know that one involves a mutable value, and the other an immutable
value, and mistakenly believe that it's the assignment step that differs
between the two pieces of code.</p>

<p>Python's underlying mechanisms are often much simpler than people give them
credit for.  Assignment always does exactly the same thing, regardless of the
value on the right-hand side.</p>

</div><!-- }}} -->

<div class="slide">
    <h1>Assignment variants</h1>
    <div class="incremental">
    <pre class="python">
    x += y
    x = x + y           # conceptually
    x = x.__iadd__(y)   # actually!
    </pre>
    </div>

    <div class="incremental">
    <pre class="python">
    # pseudo-code!
    class List:
        def __iadd__(self, other):
            self.extend(other)
            return self
    </pre>
    </div>

    <div class="incremental">
    <pre class="python">
    # These are the same:
    num_list += [4, 5]
    num_list.extend([4, 5]);  num_list = num_list
    </pre>
    </div>

    <p class="incremental">&rArr;&nbsp;&nbsp; Know what you are doing &nbsp;&nbsp;&lArr;</p>
</div>

<div class="text"><!-- {{{ -->

<p>Python provides other kinds of assignment than the simple equals sign. For
example, both numbers and lists offer += .</p>

<p>Conceptually, these two lines are the same:</p>

<code lang="py">
x += y
x = x + y
</code>

<p>The way += works in Python, though, it is implemented by the value x.  These
two lines are actually the same:</p>

<code lang="py">
x += y
x = x.__iadd__(y)
</code>

<p>(to be completely pedantic, it's the same as "x = type(x).__iadd__(x, y)",
because the method will not be found on the object itself, only on the class.)
The meaning of += depends on the type of x, because that value provides the
implementation of __iadd__ that will be used.</p>

<p>For numbers, += works just as you'd expect.  But lists give us another
surprise.  With lists, "nums = nums+more" will rebind nums to a new list formed
by concatentating nums and more.  But "nums += more" actually modifies nums
in-place, as a mutating operation.</p>

<p>The reason is that list implements __iadd__ like this (except in C, not
Python):</p>

<code lang="py">
class List:
    def __iadd__(self, other):
        self.extend(other)
        return self
</code>

<p>When you execute "nums += more", you're getting the same effect as:</p>

<code lang="py">
nums = nums.__iadd__(more)
</code>

<p>which, because of the implementation of __iadd__, acts like this:</p>

<code lang="py">
nums.extend(more)
nums = nums
</code>

<p>So there is a rebinding operation here, but first, there's a mutating
operation, and the rebinding operation is a no-op.</p>

<p>The moral of the story here is to understand the behavior of the primitives
you are using!</p>

</div><!-- }}} -->


<div class="slide">
    <h1>References can be more than just names</h1>
    <p>List elements are references</p>
    <!--[[[cog
    code = '''\
        nums = [1, 2, 3]
        x = nums[1]
        '''

    def figure(frame):
        fig = make_pyfig(size=(500,400), frame_num=frame)

        n_nums = auto_name(fig, "nums")
        l_nums = fig.list(texts="123", pos=fig.val_for_name(n_nums), set=2)
        fig.reference(n_nums, l_nums[0])
        l_nums = fig.list(texts=["", "", ""], pos=fig.val_for_name(n_nums), rise=2)
        fig.reference(n_nums, l_nums[0])
        n_hidden = auto_name(fig, "", set=0)
        int_y = n_hidden.cy
        ints = [fig.int(left=(fig.val_left+i*60, int_y), text=str(i+1), rise=2) for i in range(3)]
        for i in range(3):
            fig.connect(l_nums[i].center, 90, ints[i].north, 90, start_marker=fig.DOT, class_="arrow", rise=2)

        n_x = auto_name(fig, "x", rise=3)
        fig.connect(n_x.east, 0, ints[1].south, -90, class_="arrow", rise=3)

        cog.outl(fig.tostring())

    pyfig_animation(code, figure, [1, 1, 2])
    ]]]-->
    <!-- Animation {{{ -->
    <div class="overlay_container">
    <div class="overlay">
    <pre class="python tophalf">
        nums = [1, 2, 3]
        x = nums[1]
        </pre>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="1">
        nums = [1, 2, 3]
        x = nums[1]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id23" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id24" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id23)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="1">
        nums = [1, 2, 3]
        x = nums[1]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id25" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id26" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><rect class="list" height="50" width="40" x="315" y="25" /><rect class="list" height="50" width="40" x="355" y="25" /><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id25)" /><circle class="int value" cx="300" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="125">1</text><circle class="int value" cx="360" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="360" y="125">2</text><circle class="int value" cx="420" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="420" y="125">3</text><path class="arrow" d="M 295,50 C 295,62 295,62 297,75 C 299,87 300,87 300,100" fill="none" marker-end="url(#id25)" marker-start="url(#id26)" /><path class="arrow" d="M 335,50 C 335,63 337,65 347,75 C 357,84 360,86 360,100" fill="none" marker-end="url(#id25)" marker-start="url(#id26)" /><path class="arrow" d="M 375,50 C 375,66 381,69 397,75 C 413,80 420,83 420,100" fill="none" marker-end="url(#id25)" marker-start="url(#id26)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        nums = [1, 2, 3]
        x = nums[1]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="400" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id27" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id28" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><rect class="list" height="50" width="40" x="315" y="25" /><rect class="list" height="50" width="40" x="355" y="25" /><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id27)" /><circle class="int value" cx="300" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="125">1</text><circle class="int value" cx="360" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="360" y="125">2</text><circle class="int value" cx="420" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="420" y="125">3</text><path class="arrow" d="M 295,50 C 295,62 295,62 297,75 C 299,87 300,87 300,100" fill="none" marker-end="url(#id27)" marker-start="url(#id28)" /><path class="arrow" d="M 335,50 C 335,63 337,65 347,75 C 357,84 360,86 360,100" fill="none" marker-end="url(#id27)" marker-start="url(#id28)" /><path class="arrow" d="M 375,50 C 375,66 381,69 397,75 C 413,80 420,83 420,100" fill="none" marker-end="url(#id27)" marker-start="url(#id28)" /><polygon class="name" points="138,175 193.75,175 200,200 193.75,225 138,225" /><text dy=".3em" text-anchor="middle" x="165.875" y="200">x</text><path class="arrow" d="M 200,200 C 241,200 259,198 300,195 C 342,193 360,191 360,150" fill="none" marker-end="url(#id27)" /></svg>
    </div>
    </div>
    </div>
    <!-- }}} -->
    <!--[[[end]]]-->
</div>

<div class="text"><!-- {{{ -->

<p>All of the examples I've been using so far used names as references to
values, but other things can be references.  Python has a number of
compound data structures each of which hold references to values: list
elements, dictionary keys and values, object attributes, and so on.  Each
of those can be used on the left-hand side of an assignment, and all the
details I've been talking about apply to them.  Anything that can appear on
the left-hand side of an assignment statement is a reference, and
everywhere I say "name" you can substitute "reference".</p>

<p>In the diagrams of lists so far, I've shown numbers stored in the boxes,
but really, each element is a reference, so they should really be drawn like
this, with arrows from the boxes to values outside of them:</p>

<figurep>
    <!--[[[cog
    fig = make_pyfig(title="nums refers to a list, which refers to ints")
    fig.top_code("nums = [1, 2, 3]")
    n_nums = fig.auto_name("nums")
    l_nums = fig.list(length=3, pos=fig.val_for_name(n_nums))
    fig.reference(n_nums, l_nums[0])
    y_ints = fig.y+10
    ints = [fig.int(top=(l_nums[1].cx+(i-1)*35, y_ints), text=str(i+1)) for i in range(3)]
    for i in range(3):
        fig.connect(l_nums[i].center, 90, ints[i].north, 90, start_marker=fig.DOT, class_="arrow")
    cog.outl(fig.tostring())
    ]]]-->
    <svg baseProfile="full" height="191.5" version="1.1" width="304.0" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><title>nums refers to a list, which refers to ints</title><defs><marker id="id29" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id30" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><g transform="translate(-93.0,-8.0)"><polygon class="name" points="95,62.5 193.75,62.5 200,87.5 193.75,112.5 95,112.5" /><text dy=".3em" text-anchor="middle" x="144.375" y="87.5">nums</text><rect class="list" height="50" width="40" x="275" y="62.5" /><rect class="list" height="50" width="40" x="315" y="62.5" /><rect class="list" height="50" width="40" x="355" y="62.5" /><path class="arrow" d="M 200,87 C 218,87 218,87 237,87 C 256,87 256,87 275,87" fill="none" marker-end="url(#id29)" /><circle class="int value" cx="300" cy="172.5" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="172.5">1</text><circle class="int value" cx="335" cy="172.5" r="25" /><text dy=".3em" text-anchor="middle" x="335" y="172.5">2</text><circle class="int value" cx="370" cy="172.5" r="25" /><text dy=".3em" text-anchor="middle" x="370" y="172.5">3</text><path class="arrow" d="M 295,87 C 295,102 295,102 297,117 C 299,132 300,132 300,147" fill="none" marker-end="url(#id29)" marker-start="url(#id30)" /><path class="arrow" d="M 335,87 C 335,102 335,102 335,117 C 335,132 335,132 335,147" fill="none" marker-end="url(#id29)" marker-start="url(#id30)" /><path class="arrow" d="M 375,87 C 375,102 374,102 372,117 C 370,132 370,132 370,147" fill="none" marker-end="url(#id29)" marker-start="url(#id30)" /><text class="top_code" dy=".3em" text-anchor="middle" x="245" y="25">nums = [1, 2, 3]</text></g></svg>
    <!--[[[end]]]-->
</figurep>

<p>But that gets complicated quickly, so I've used a visual shorthand, with
the numbers in the boxes themselves.</p>

<figurep>
    <!--[[[cog
    fig = make_pyfig(title="nums refers to a list of numbers")
    fig.top_code("nums = [1, 2, 3]")
    n_nums = fig.auto_name("nums")
    l_nums = fig.list(texts="123", pos=fig.val_for_name(n_nums))
    fig.reference(n_nums, l_nums[0])
    cog.outl(fig.tostring())
    ]]]-->
    <svg baseProfile="full" height="106.5" version="1.1" width="304.0" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><title>nums refers to a list of numbers</title><defs><marker id="id31" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><g transform="translate(-93.0,-8.0)"><polygon class="name" points="95,62.5 193.75,62.5 200,87.5 193.75,112.5 95,112.5" /><text dy=".3em" text-anchor="middle" x="144.375" y="87.5">nums</text><rect class="list" height="50" width="40" x="275" y="62.5" /><text dy=".3em" text-anchor="middle" x="295" y="87.5">1</text><rect class="list" height="50" width="40" x="315" y="62.5" /><text dy=".3em" text-anchor="middle" x="335" y="87.5">2</text><rect class="list" height="50" width="40" x="355" y="62.5" /><text dy=".3em" text-anchor="middle" x="375" y="87.5">3</text><path class="arrow" d="M 200,87 C 218,87 218,87 237,87 C 256,87 256,87 275,87" fill="none" marker-end="url(#id31)" /><text class="top_code" dy=".3em" text-anchor="middle" x="245" y="25">nums = [1, 2, 3]</text></g></svg>
    <!--[[[end]]]-->
</figurep>

</div><!-- }}} -->

<div class="slide">
    <h1>Lots of things are references</h1>
    <ul>
        <li>Object attributes</li>
        <li>List elements</li>
        <li>Dict values (and keys!)</li>
        <li>Anything on the left side of an assignment</li>
    </ul>
    <pre class="python">
    my_obj.attr = 23
    my_dict[key] = 24
    my_list[index] = 25
    my_obj.attr[key][index].attr = "etc, etc"
    </pre>
</div>

<div class="text"><!-- {{{ -->

<p>Here are some other assignments.  Each of these left-hand sides is a
reference:</p>

<code lang="py">
my_obj.attr = 23
my_dict[key] = 24
my_list[index] = 25
my_obj.attr[key][index].attr = "etc, etc"
</code>

<p>and so on. Lots of Python data structures hold values, and each of those is
a reference.  All of the rules here about names apply exactly the same to any
of these references.  For example, the garbage collector doesn't just count
names, it counts any kind of reference to decide when a value can be
reclaimed.</p>

<p>Note that "i = x" assigns to the name i, but "i[0] = x" does not assign to
the name i.  It assigns to the first element of i's value.  It's important to
keep straight what exactly is being assigned to.  Just because a name appears
somewhere on the left-hand side of the assignment statement doesn't mean the
name is being rebound.</p>

</div><!-- }}} -->

<div class="slide">
    <h1>Lots of things are assignments</h1>
    <p>All of these assign to <b>X</b></p>
    <pre class="python">
    X = ...
    for X in ...
    class X(...):
    def X(...):
    def fn(X):
    import X
    from ... import X
    except ... as X:
    with ... as X:
    </pre>
</div>

<div class="text"><!-- {{{ -->

<p>Just as many things can serve as references, there are many operations in
    Python that are assignments.  Each of these lines is an assignment to the
    name X:</p>

<code lang="py">
X = ...
for X in ...
[... for X in ...]
(... for X in ...)
{... for X in ...}
class X(...):
def X(...):
def fn(X): ... ; fn(12)
with ... as X:
except ... as X:
import X
from ... import X
import ... as X
from ... import ... as X
</code>

<p>I don't mean that these statements act kind of like assignments.  I mean
that these are assignments: they all make the name X refer to a value, and
everything I've been saying about assignments applies to all of them
uniformly.</p>

<p>For the most part, these statements define X in the same scope as the
statement, but not all of them, especially the comprehensions, and the details
differ slightly between Python 2 and Python 3.  But they are all real
assignments, and every fact about assignment applies to all of them.</p>

</div><!-- }}} -->

<div class="slide">
    <h1>For loops</h1>
    <div class="incremental">
        <pre class="python">
        for x in sequence:
            something(x)
        </pre>
    </div>

    <div class="incremental">
        <pre class="python">
        x = sequence[0]
        something(x)
        x = sequence[1]
        something(x)
        ...
        </pre>
    </div>
</div>

<div class="text"><!-- {{{ -->

<p>For-loops are an interesting example. When you write code like this:</p>

<code lang="py">
for x in sequence:
    something(x)
</code>

<p>it executes kind of like this:</p>

<code lang="py">
x = sequence[0]
something(x)
x = sequence[1]
something(x)
# and so on...
</code>

<p>The actual mechanics of getting values from the sequence is more involved
than simple indexing like I've shown here.  But the point is that each element
in the sequence is assigned to x just as if it had been done with a simple
assignment statement.  And again, all the rules about assignments and how they
work apply to this assignment.</p>

</div><!-- }}} -->

<div class="slide">
    <h1>For loops</h1>
    <p>&rArr;&nbsp;&nbsp; Loop Like a Native (PyCon 2013): <a href="http://bit.ly/pyiter">bit.ly/pyiter</a></p>
    <!--[[[cog
    code = '''\
        nums = [1, 2, 3]
        for x in nums:          # x = nums[0] ...
            x = x * 10
        print(nums)             # [1, 2, 3]   :(
        '''

    def figure(frame):
        fig = make_pyfig(size=(500,325), frame_num=frame)

        n_nums = auto_name(fig, "nums")
        l_nums = fig.list(texts=["", "", ""], pos=fig.val_for_name(n_nums))
        fig.reference(n_nums, l_nums[0])
        n_hidden = auto_name(fig, "", set=0)
        int_y = n_hidden.cy
        ints = [fig.int(left=(fig.val_left+i*60, int_y), text=str(i+1)) for i in range(3)]
        for i in range(len(l_nums)):
            fig.connect(l_nums[i].center, 90, ints[i].north, 90, start_marker=fig.DOT, class_="arrow")

        n_x = auto_name(fig, "x", rise=2)
        n_hidden10 = auto_name(fig, "", set=0)

        fig.connect(n_x.east, 0, ints[0].south, -90, class_="arrow", rise=2, set=4)
        tens = fig.int(left=(fig.val_left, n_hidden10.cy), text="10", rise=3, fade=1, set=5)
        fig.reference(n_x, tens, rise=4, set=5)

        fig.connect(n_x.east, 0, ints[1].south, -90, class_="arrow", rise=5, set=7)
        tens = fig.int(left=(fig.val_left+60, n_hidden10.cy), text="20", rise=6, fade=1, set=8)
        fig.reference(n_x, tens, rise=7, set=8)

        fig.connect(n_x.east, 0, ints[2].south, -90, class_="arrow", rise=8, set=10)
        tens = fig.int(left=(fig.val_left+120, n_hidden10.cy), text="30", rise=9)
        fig.reference(n_x, tens, rise=10)

        cog.outl(fig.tostring())

    pyfig_animation(code, figure, [1, 2, 3, 3, 2, 3, 3, 2, 3, 3, 4])
    ]]]-->
    <!-- Animation {{{ -->
    <div class="overlay_container">
    <div class="overlay">
    <pre class="python tophalf">
        nums = [1, 2, 3]
        for x in nums:          # x = nums[0] ...
            x = x * 10
        print(nums)             # [1, 2, 3]   :(
        </pre>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="1">
        nums = [1, 2, 3]
        for x in nums:          # x = nums[0] ...
            x = x * 10
        print(nums)             # [1, 2, 3]   :(
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id32" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id33" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><rect class="list" height="50" width="40" x="315" y="25" /><rect class="list" height="50" width="40" x="355" y="25" /><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id32)" /><circle class="int value" cx="300" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="125">1</text><circle class="int value" cx="360" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="360" y="125">2</text><circle class="int value" cx="420" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="420" y="125">3</text><path class="arrow" d="M 295,50 C 295,62 295,62 297,75 C 299,87 300,87 300,100" fill="none" marker-end="url(#id32)" marker-start="url(#id33)" /><path class="arrow" d="M 335,50 C 335,63 337,65 347,75 C 357,84 360,86 360,100" fill="none" marker-end="url(#id32)" marker-start="url(#id33)" /><path class="arrow" d="M 375,50 C 375,66 381,69 397,75 C 413,80 420,83 420,100" fill="none" marker-end="url(#id32)" marker-start="url(#id33)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        nums = [1, 2, 3]
        for x in nums:          # x = nums[0] ...
            x = x * 10
        print(nums)             # [1, 2, 3]   :(
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id34" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id35" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><rect class="list" height="50" width="40" x="315" y="25" /><rect class="list" height="50" width="40" x="355" y="25" /><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id34)" /><circle class="int value" cx="300" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="125">1</text><circle class="int value" cx="360" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="360" y="125">2</text><circle class="int value" cx="420" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="420" y="125">3</text><path class="arrow" d="M 295,50 C 295,62 295,62 297,75 C 299,87 300,87 300,100" fill="none" marker-end="url(#id34)" marker-start="url(#id35)" /><path class="arrow" d="M 335,50 C 335,63 337,65 347,75 C 357,84 360,86 360,100" fill="none" marker-end="url(#id34)" marker-start="url(#id35)" /><path class="arrow" d="M 375,50 C 375,66 381,69 397,75 C 413,80 420,83 420,100" fill="none" marker-end="url(#id34)" marker-start="url(#id35)" /><polygon class="name" points="138,175 193.75,175 200,200 193.75,225 138,225" /><text dy=".3em" text-anchor="middle" x="165.875" y="200">x</text><path class="arrow" d="M 200,200 C 227,200 237,197 263,188 C 290,180 300,177 300,150" fill="none" marker-end="url(#id34)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="3">
        nums = [1, 2, 3]
        for x in nums:          # x = nums[0] ...
            x = x * 10
        print(nums)             # [1, 2, 3]   :(
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id36" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id37" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><rect class="list" height="50" width="40" x="315" y="25" /><rect class="list" height="50" width="40" x="355" y="25" /><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id36)" /><circle class="int value" cx="300" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="125">1</text><circle class="int value" cx="360" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="360" y="125">2</text><circle class="int value" cx="420" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="420" y="125">3</text><path class="arrow" d="M 295,50 C 295,62 295,62 297,75 C 299,87 300,87 300,100" fill="none" marker-end="url(#id36)" marker-start="url(#id37)" /><path class="arrow" d="M 335,50 C 335,63 337,65 347,75 C 357,84 360,86 360,100" fill="none" marker-end="url(#id36)" marker-start="url(#id37)" /><path class="arrow" d="M 375,50 C 375,66 381,69 397,75 C 413,80 420,83 420,100" fill="none" marker-end="url(#id36)" marker-start="url(#id37)" /><polygon class="name" points="138,175 193.75,175 200,200 193.75,225 138,225" /><text dy=".3em" text-anchor="middle" x="165.875" y="200">x</text><path class="arrow" d="M 200,200 C 227,200 237,197 263,188 C 290,180 300,177 300,150" fill="none" marker-end="url(#id36)" /><circle class="int value" cx="300" cy="275" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="275">10</text></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="3">
        nums = [1, 2, 3]
        for x in nums:          # x = nums[0] ...
            x = x * 10
        print(nums)             # [1, 2, 3]   :(
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id38" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id39" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><rect class="list" height="50" width="40" x="315" y="25" /><rect class="list" height="50" width="40" x="355" y="25" /><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id38)" /><circle class="int value" cx="300" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="125">1</text><circle class="int value" cx="360" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="360" y="125">2</text><circle class="int value" cx="420" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="420" y="125">3</text><path class="arrow" d="M 295,50 C 295,62 295,62 297,75 C 299,87 300,87 300,100" fill="none" marker-end="url(#id38)" marker-start="url(#id39)" /><path class="arrow" d="M 335,50 C 335,63 337,65 347,75 C 357,84 360,86 360,100" fill="none" marker-end="url(#id38)" marker-start="url(#id39)" /><path class="arrow" d="M 375,50 C 375,66 381,69 397,75 C 413,80 420,83 420,100" fill="none" marker-end="url(#id38)" marker-start="url(#id39)" /><polygon class="name" points="138,175 193.75,175 200,200 193.75,225 138,225" /><text dy=".3em" text-anchor="middle" x="165.875" y="200">x</text><circle class="int value" cx="300" cy="275" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="275">10</text><path class="arrow" d="M 200,200 C 226,200 230,212 237,237 C 244,262 248,275 275,275" fill="none" marker-end="url(#id38)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        nums = [1, 2, 3]
        for x in nums:          # x = nums[0] ...
            x = x * 10
        print(nums)             # [1, 2, 3]   :(
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id40" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id41" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><rect class="list" height="50" width="40" x="315" y="25" /><rect class="list" height="50" width="40" x="355" y="25" /><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id40)" /><circle class="int value" cx="300" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="125">1</text><circle class="int value" cx="360" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="360" y="125">2</text><circle class="int value" cx="420" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="420" y="125">3</text><path class="arrow" d="M 295,50 C 295,62 295,62 297,75 C 299,87 300,87 300,100" fill="none" marker-end="url(#id40)" marker-start="url(#id41)" /><path class="arrow" d="M 335,50 C 335,63 337,65 347,75 C 357,84 360,86 360,100" fill="none" marker-end="url(#id40)" marker-start="url(#id41)" /><path class="arrow" d="M 375,50 C 375,66 381,69 397,75 C 413,80 420,83 420,100" fill="none" marker-end="url(#id40)" marker-start="url(#id41)" /><polygon class="name" points="138,175 193.75,175 200,200 193.75,225 138,225" /><text dy=".3em" text-anchor="middle" x="165.875" y="200">x</text><circle class="int value" cx="300" cy="275" opacity="0.25" r="25" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="300" y="275">10</text><path class="arrow" d="M 200,200 C 241,200 259,198 300,195 C 342,193 360,191 360,150" fill="none" marker-end="url(#id40)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="3">
        nums = [1, 2, 3]
        for x in nums:          # x = nums[0] ...
            x = x * 10
        print(nums)             # [1, 2, 3]   :(
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id42" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id43" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><rect class="list" height="50" width="40" x="315" y="25" /><rect class="list" height="50" width="40" x="355" y="25" /><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id42)" /><circle class="int value" cx="300" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="125">1</text><circle class="int value" cx="360" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="360" y="125">2</text><circle class="int value" cx="420" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="420" y="125">3</text><path class="arrow" d="M 295,50 C 295,62 295,62 297,75 C 299,87 300,87 300,100" fill="none" marker-end="url(#id42)" marker-start="url(#id43)" /><path class="arrow" d="M 335,50 C 335,63 337,65 347,75 C 357,84 360,86 360,100" fill="none" marker-end="url(#id42)" marker-start="url(#id43)" /><path class="arrow" d="M 375,50 C 375,66 381,69 397,75 C 413,80 420,83 420,100" fill="none" marker-end="url(#id42)" marker-start="url(#id43)" /><polygon class="name" points="138,175 193.75,175 200,200 193.75,225 138,225" /><text dy=".3em" text-anchor="middle" x="165.875" y="200">x</text><path class="arrow" d="M 200,200 C 241,200 259,198 300,195 C 342,193 360,191 360,150" fill="none" marker-end="url(#id42)" /><circle class="int value" cx="360" cy="275" r="25" /><text dy=".3em" text-anchor="middle" x="360" y="275">20</text></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="3">
        nums = [1, 2, 3]
        for x in nums:          # x = nums[0] ...
            x = x * 10
        print(nums)             # [1, 2, 3]   :(
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id44" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id45" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><rect class="list" height="50" width="40" x="315" y="25" /><rect class="list" height="50" width="40" x="355" y="25" /><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id44)" /><circle class="int value" cx="300" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="125">1</text><circle class="int value" cx="360" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="360" y="125">2</text><circle class="int value" cx="420" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="420" y="125">3</text><path class="arrow" d="M 295,50 C 295,62 295,62 297,75 C 299,87 300,87 300,100" fill="none" marker-end="url(#id44)" marker-start="url(#id45)" /><path class="arrow" d="M 335,50 C 335,63 337,65 347,75 C 357,84 360,86 360,100" fill="none" marker-end="url(#id44)" marker-start="url(#id45)" /><path class="arrow" d="M 375,50 C 375,66 381,69 397,75 C 413,80 420,83 420,100" fill="none" marker-end="url(#id44)" marker-start="url(#id45)" /><polygon class="name" points="138,175 193.75,175 200,200 193.75,225 138,225" /><text dy=".3em" text-anchor="middle" x="165.875" y="200">x</text><circle class="int value" cx="360" cy="275" r="25" /><text dy=".3em" text-anchor="middle" x="360" y="275">20</text><path class="arrow" d="M 200,200 C 238,200 243,206 267,237 C 291,268 296,275 335,275" fill="none" marker-end="url(#id44)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        nums = [1, 2, 3]
        for x in nums:          # x = nums[0] ...
            x = x * 10
        print(nums)             # [1, 2, 3]   :(
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id46" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id47" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><rect class="list" height="50" width="40" x="315" y="25" /><rect class="list" height="50" width="40" x="355" y="25" /><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id46)" /><circle class="int value" cx="300" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="125">1</text><circle class="int value" cx="360" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="360" y="125">2</text><circle class="int value" cx="420" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="420" y="125">3</text><path class="arrow" d="M 295,50 C 295,62 295,62 297,75 C 299,87 300,87 300,100" fill="none" marker-end="url(#id46)" marker-start="url(#id47)" /><path class="arrow" d="M 335,50 C 335,63 337,65 347,75 C 357,84 360,86 360,100" fill="none" marker-end="url(#id46)" marker-start="url(#id47)" /><path class="arrow" d="M 375,50 C 375,66 381,69 397,75 C 413,80 420,83 420,100" fill="none" marker-end="url(#id46)" marker-start="url(#id47)" /><polygon class="name" points="138,175 193.75,175 200,200 193.75,225 138,225" /><text dy=".3em" text-anchor="middle" x="165.875" y="200">x</text><circle class="int value" cx="360" cy="275" opacity="0.25" r="25" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="360" y="275">20</text><path class="arrow" d="M 200,200 C 256,200 281,200 338,203 C 394,205 420,206 420,150" fill="none" marker-end="url(#id46)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="3">
        nums = [1, 2, 3]
        for x in nums:          # x = nums[0] ...
            x = x * 10
        print(nums)             # [1, 2, 3]   :(
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id48" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id49" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><rect class="list" height="50" width="40" x="315" y="25" /><rect class="list" height="50" width="40" x="355" y="25" /><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id48)" /><circle class="int value" cx="300" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="125">1</text><circle class="int value" cx="360" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="360" y="125">2</text><circle class="int value" cx="420" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="420" y="125">3</text><path class="arrow" d="M 295,50 C 295,62 295,62 297,75 C 299,87 300,87 300,100" fill="none" marker-end="url(#id48)" marker-start="url(#id49)" /><path class="arrow" d="M 335,50 C 335,63 337,65 347,75 C 357,84 360,86 360,100" fill="none" marker-end="url(#id48)" marker-start="url(#id49)" /><path class="arrow" d="M 375,50 C 375,66 381,69 397,75 C 413,80 420,83 420,100" fill="none" marker-end="url(#id48)" marker-start="url(#id49)" /><polygon class="name" points="138,175 193.75,175 200,200 193.75,225 138,225" /><text dy=".3em" text-anchor="middle" x="165.875" y="200">x</text><path class="arrow" d="M 200,200 C 256,200 281,200 338,203 C 394,205 420,206 420,150" fill="none" marker-end="url(#id48)" /><circle class="int value" cx="420" cy="275" r="25" /><text dy=".3em" text-anchor="middle" x="420" y="275">30</text></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="3">
        nums = [1, 2, 3]
        for x in nums:          # x = nums[0] ...
            x = x * 10
        print(nums)             # [1, 2, 3]   :(
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id50" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id51" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><rect class="list" height="50" width="40" x="315" y="25" /><rect class="list" height="50" width="40" x="355" y="25" /><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id50)" /><circle class="int value" cx="300" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="125">1</text><circle class="int value" cx="360" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="360" y="125">2</text><circle class="int value" cx="420" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="420" y="125">3</text><path class="arrow" d="M 295,50 C 295,62 295,62 297,75 C 299,87 300,87 300,100" fill="none" marker-end="url(#id50)" marker-start="url(#id51)" /><path class="arrow" d="M 335,50 C 335,63 337,65 347,75 C 357,84 360,86 360,100" fill="none" marker-end="url(#id50)" marker-start="url(#id51)" /><path class="arrow" d="M 375,50 C 375,66 381,69 397,75 C 413,80 420,83 420,100" fill="none" marker-end="url(#id50)" marker-start="url(#id51)" /><polygon class="name" points="138,175 193.75,175 200,200 193.75,225 138,225" /><text dy=".3em" text-anchor="middle" x="165.875" y="200">x</text><circle class="int value" cx="420" cy="275" r="25" /><text dy=".3em" text-anchor="middle" x="420" y="275">30</text><path class="arrow" d="M 200,200 C 252,200 257,204 297,237 C 337,270 342,275 395,275" fill="none" marker-end="url(#id50)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="4">
        nums = [1, 2, 3]
        for x in nums:          # x = nums[0] ...
            x = x * 10
        print(nums)             # [1, 2, 3]   :(
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id52" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id53" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><rect class="list" height="50" width="40" x="315" y="25" /><rect class="list" height="50" width="40" x="355" y="25" /><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id52)" /><circle class="int value" cx="300" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="125">1</text><circle class="int value" cx="360" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="360" y="125">2</text><circle class="int value" cx="420" cy="125" r="25" /><text dy=".3em" text-anchor="middle" x="420" y="125">3</text><path class="arrow" d="M 295,50 C 295,62 295,62 297,75 C 299,87 300,87 300,100" fill="none" marker-end="url(#id52)" marker-start="url(#id53)" /><path class="arrow" d="M 335,50 C 335,63 337,65 347,75 C 357,84 360,86 360,100" fill="none" marker-end="url(#id52)" marker-start="url(#id53)" /><path class="arrow" d="M 375,50 C 375,66 381,69 397,75 C 413,80 420,83 420,100" fill="none" marker-end="url(#id52)" marker-start="url(#id53)" /><polygon class="name" points="138,175 193.75,175 200,200 193.75,225 138,225" /><text dy=".3em" text-anchor="middle" x="165.875" y="200">x</text><circle class="int value" cx="420" cy="275" r="25" /><text dy=".3em" text-anchor="middle" x="420" y="275">30</text><path class="arrow" d="M 200,200 C 252,200 257,204 297,237 C 337,270 342,275 395,275" fill="none" marker-end="url(#id52)" /></svg>
    </div>
    </div>
    </div>
    <!-- }}} -->
    <!--[[[end]]]-->
</div>

<div class="text"><!-- {{{ -->

<p>Let's say we have a list of numbers, and we want to multiply them all by 10,
so if we started with [1, 2, 3], we want to modify the list to become [10, 20, 30].
A simple approach might be this:</p>

<code lang="py">
nums = [1, 2, 3]
for x in nums:          # x = nums[0] ...
    x = x * 10
print(nums)             # [1, 2, 3]   :(
</code>

<p>but it doesn't work.  To see why, remember that on the first iteration, x is
another name for nums[0].  As we learned earlier, when you have two names
referring to one value, and you reassign one of the names, the other name
doesn't also change.  In this case, we reassign x (with "x = x * 10"), so x is
now 10, but nums[0] still refers to the old value, 1.</p>

<p>Our loop never modifies the original list because we are simply reassigning
the name x over and over again.</p>

<p>The best advice is to avoid mutating lists, and instead to make new lists:</p>

<code lang="py">
nums = [ 10*x for x in nums ]
</code>

</div><!-- }}} -->

<div class="slide">
    <h1>Function arguments are assignments</h1>
    <!--[[[cog
    code = '''\
        def func(x):    # x = num
            print(x)
            return

        num = 17
        func(num)       # x = num
        print(num)
        '''

    def figure(frame):
        fig = make_pyfig(size=(500,250), frame_num=frame)

        n_num = auto_name(fig, "num")
        i_17 = fig.int(pos=fig.val_for_name(n_num), text="17")
        fig.reference(n_num, i_17)

        fig.frame(pos=fig.next_frame(), size=(200, 125), text="func", rise=2, set=5, fade=1)
        n_x = auto_name(fig, "x", rise=2, set=5, fade=1)
        fig.reference(n_x, i_17)

        cog.outl(fig.tostring())

    pyfig_animation(code, figure, [5, (6,1), 1, 2, 3, 7])
    ]]]-->
    <!-- Animation {{{ -->
    <div class="overlay_container">
    <div class="overlay">
    <pre class="python tophalf">
        def func(x):    # x = num
            print(x)
            return

        num = 17
        func(num)       # x = num
        print(num)
        </pre>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="5">
        def func(x):    # x = num
            print(x)
            return

        num = 17
        func(num)       # x = num
        print(num)
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="250" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id54" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="114,25 193.75,25 200,50 193.75,75 114,75" /><text dy=".3em" text-anchor="middle" x="153.875" y="50">num</text><circle class="int value" cx="300" cy="50" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="50">17</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id54)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="6,1">
        def func(x):    # x = num
            print(x)
            return

        num = 17
        func(num)       # x = num
        print(num)
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="250" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id55" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="114,25 193.75,25 200,50 193.75,75 114,75" /><text dy=".3em" text-anchor="middle" x="153.875" y="50">num</text><circle class="int value" cx="300" cy="50" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="50">17</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id55)" /><rect class="frame" height="125" rx="20" ry="20" width="200" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="125" y="125">func</text><polygon class="name" points="138,150 193.75,150 200,175 193.75,200 138,200" /><text dy=".3em" text-anchor="middle" x="165.875" y="175">x</text><path class="arrow" d="M 200,175 C 236,175 236,148 237,112 C 238,76 238,50 275,50" fill="none" marker-end="url(#id55)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="1">
        def func(x):    # x = num
            print(x)
            return

        num = 17
        func(num)       # x = num
        print(num)
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="250" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id56" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="114,25 193.75,25 200,50 193.75,75 114,75" /><text dy=".3em" text-anchor="middle" x="153.875" y="50">num</text><circle class="int value" cx="300" cy="50" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="50">17</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id56)" /><rect class="frame" height="125" rx="20" ry="20" width="200" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="125" y="125">func</text><polygon class="name" points="138,150 193.75,150 200,175 193.75,200 138,200" /><text dy=".3em" text-anchor="middle" x="165.875" y="175">x</text><path class="arrow" d="M 200,175 C 236,175 236,148 237,112 C 238,76 238,50 275,50" fill="none" marker-end="url(#id56)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        def func(x):    # x = num
            print(x)
            return

        num = 17
        func(num)       # x = num
        print(num)
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="250" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id57" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="114,25 193.75,25 200,50 193.75,75 114,75" /><text dy=".3em" text-anchor="middle" x="153.875" y="50">num</text><circle class="int value" cx="300" cy="50" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="50">17</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id57)" /><rect class="frame" height="125" rx="20" ry="20" width="200" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="125" y="125">func</text><polygon class="name" points="138,150 193.75,150 200,175 193.75,200 138,200" /><text dy=".3em" text-anchor="middle" x="165.875" y="175">x</text><path class="arrow" d="M 200,175 C 236,175 236,148 237,112 C 238,76 238,50 275,50" fill="none" marker-end="url(#id57)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="3">
        def func(x):    # x = num
            print(x)
            return

        num = 17
        func(num)       # x = num
        print(num)
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="250" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id58" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="114,25 193.75,25 200,50 193.75,75 114,75" /><text dy=".3em" text-anchor="middle" x="153.875" y="50">num</text><circle class="int value" cx="300" cy="50" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="50">17</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id58)" /><rect class="frame" height="125" opacity="0.25" rx="20" ry="20" width="200" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="0.25" text-anchor="middle" x="125" y="125">func</text><polygon class="name" opacity="0.25" points="138,150 193.75,150 200,175 193.75,200 138,200" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="165.875" y="175">x</text><path class="arrow" d="M 200,175 C 236,175 236,148 237,112 C 238,76 238,50 275,50" fill="none" marker-end="url(#id58)" opacity="0.25" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="7">
        def func(x):    # x = num
            print(x)
            return

        num = 17
        func(num)       # x = num
        print(num)
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="250" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id59" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="114,25 193.75,25 200,50 193.75,75 114,75" /><text dy=".3em" text-anchor="middle" x="153.875" y="50">num</text><circle class="int value" cx="300" cy="50" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="50">17</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id59)" /></svg>
    </div>
    </div>
    </div>
    <!-- }}} -->
    <!--[[[end]]]-->
</div>

<div class="text"><!-- {{{ -->

<p>Function arguments are perhaps the most important thing that doesn't look
like an assignment, but is.  When you define a function, you specify its 
formal parameters, as x is here:</p>

<code lang="py">
def func(x):
    print(x)
</code>

<p>When you call a function, you provide actual argument values:</p>

<code lang="py">
num = 17
func(num)
print(num)
</code>

<p>Here num is the value supplied for the parameter x.  When the function is
called, we get the exact same behavior as if we had executed "x = num".  The
actual value is assigned to the parameter.</p>

<p>Each function call creates a stack frame, which is a container for the names
local to that function.  The name x is local to the function, but the assignment
semantics are the same.</p>

<p>When we are inside func, there is a value (17) with two names: num in the
calling frame, and x in the function's frame.</p>

<p>When the function returns, the function's stack frame is destroyed, which
destroys the names it contains, which may or may not reclaim values if they
were the last names referring to the values.</p>

</div><!-- }}} -->

<div class="slide">
    <!--[[[cog
    code = '''\
        def append_twice(a_list, val):
            a_list.append(val)
            a_list.append(val)
            return

        nums = [1, 2, 3]
        append_twice(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        '''

    def figure(frame):
        fig = make_pyfig(size=(500,325), frame_num=frame)

        n_nums = auto_name(fig, "nums")
        l_nums = fig.list(texts=["1", "2", "3"], pos=fig.val_for_name(n_nums))
        fig.reference(n_nums, l_nums[0])

        fig.frame(pos=fig.next_frame(), size=(200,200), text="append_twice", rise=2, set=6, fade=1)
        n_a_list = auto_name(fig, "a_list", rise=2, set=6, fade=1)
        fig.reference(n_a_list, l_nums[0])
        n_val = auto_name(fig, "val", rise=2, set=6, fade=1)
        i_val = fig.int(pos=fig.val_for_name(n_val), text="7", rise=2, set=7, fade=1)
        fig.reference(n_val, i_val)

        l_nums = fig.list(texts=["1", "2", "3", "7"], center=l_nums[0].center, rise=4)
        fig.highlight(box=l_nums[-1], rise=4, set=5)
        fig.highlight(box=n_a_list, rise=4, set=6)
        l_nums = fig.list(texts=["1", "2", "3", "7", "7"], center=l_nums[0].center, rise=5)
        fig.highlight(box=l_nums[-1], rise=5, set=6)
        cog.outl(fig.tostring())

    pyfig_animation(code, figure, [6, (7, 1), 1, 2, 3, 4, 4, 8])
    ]]]-->
    <!-- Animation {{{ -->
    <div class="overlay_container">
    <div class="overlay">
    <pre class="python tophalf">
        def append_twice(a_list, val):
            a_list.append(val)
            a_list.append(val)
            return

        nums = [1, 2, 3]
        append_twice(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="6">
        def append_twice(a_list, val):
            a_list.append(val)
            a_list.append(val)
            return

        nums = [1, 2, 3]
        append_twice(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id60" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id60)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="7,1">
        def append_twice(a_list, val):
            a_list.append(val)
            a_list.append(val)
            return

        nums = [1, 2, 3]
        append_twice(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id61" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id61)" /><rect class="frame" height="200" rx="20" ry="20" width="200" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="125" y="125">append_twice</text><polygon class="name" points="78,150 193.75,150 200,175 193.75,200 78,200" /><text dy=".3em" text-anchor="middle" x="135.875" y="175">a_list</text><path class="arrow" d="M 200,175 C 236,175 236,148 237,112 C 238,76 238,50 275,50" fill="none" marker-end="url(#id61)" /><polygon class="name" points="114,225 193.75,225 200,250 193.75,275 114,275" /><text dy=".3em" text-anchor="middle" x="153.875" y="250">val</text><circle class="int value" cx="300" cy="250" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="250">7</text><path class="arrow" d="M 200,250 C 218,250 218,250 237,250 C 256,250 256,250 275,250" fill="none" marker-end="url(#id61)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="1">
        def append_twice(a_list, val):
            a_list.append(val)
            a_list.append(val)
            return

        nums = [1, 2, 3]
        append_twice(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id62" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id62)" /><rect class="frame" height="200" rx="20" ry="20" width="200" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="125" y="125">append_twice</text><polygon class="name" points="78,150 193.75,150 200,175 193.75,200 78,200" /><text dy=".3em" text-anchor="middle" x="135.875" y="175">a_list</text><path class="arrow" d="M 200,175 C 236,175 236,148 237,112 C 238,76 238,50 275,50" fill="none" marker-end="url(#id62)" /><polygon class="name" points="114,225 193.75,225 200,250 193.75,275 114,275" /><text dy=".3em" text-anchor="middle" x="153.875" y="250">val</text><circle class="int value" cx="300" cy="250" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="250">7</text><path class="arrow" d="M 200,250 C 218,250 218,250 237,250 C 256,250 256,250 275,250" fill="none" marker-end="url(#id62)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        def append_twice(a_list, val):
            a_list.append(val)
            a_list.append(val)
            return

        nums = [1, 2, 3]
        append_twice(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id63" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id63)" /><rect class="frame" height="200" rx="20" ry="20" width="200" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="125" y="125">append_twice</text><polygon class="name" points="78,150 193.75,150 200,175 193.75,200 78,200" /><text dy=".3em" text-anchor="middle" x="135.875" y="175">a_list</text><path class="arrow" d="M 200,175 C 236,175 236,148 237,112 C 238,76 238,50 275,50" fill="none" marker-end="url(#id63)" /><polygon class="name" points="114,225 193.75,225 200,250 193.75,275 114,275" /><text dy=".3em" text-anchor="middle" x="153.875" y="250">val</text><circle class="int value" cx="300" cy="250" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="250">7</text><path class="arrow" d="M 200,250 C 218,250 218,250 237,250 C 256,250 256,250 275,250" fill="none" marker-end="url(#id63)" /><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><rect class="list" height="50" width="40" x="395" y="25" /><text dy=".3em" text-anchor="middle" x="415" y="50">7</text><rect class="highlight" height="60" rx="5" ry="5" width="50" x="390" y="20" /><rect class="highlight" height="60" rx="5" ry="5" width="132" x="73" y="145" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="3">
        def append_twice(a_list, val):
            a_list.append(val)
            a_list.append(val)
            return

        nums = [1, 2, 3]
        append_twice(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id64" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id64)" /><rect class="frame" height="200" rx="20" ry="20" width="200" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="125" y="125">append_twice</text><polygon class="name" points="78,150 193.75,150 200,175 193.75,200 78,200" /><text dy=".3em" text-anchor="middle" x="135.875" y="175">a_list</text><path class="arrow" d="M 200,175 C 236,175 236,148 237,112 C 238,76 238,50 275,50" fill="none" marker-end="url(#id64)" /><polygon class="name" points="114,225 193.75,225 200,250 193.75,275 114,275" /><text dy=".3em" text-anchor="middle" x="153.875" y="250">val</text><circle class="int value" cx="300" cy="250" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="250">7</text><path class="arrow" d="M 200,250 C 218,250 218,250 237,250 C 256,250 256,250 275,250" fill="none" marker-end="url(#id64)" /><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><rect class="list" height="50" width="40" x="395" y="25" /><text dy=".3em" text-anchor="middle" x="415" y="50">7</text><rect class="highlight" height="60" rx="5" ry="5" width="132" x="73" y="145" /><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><rect class="list" height="50" width="40" x="395" y="25" /><text dy=".3em" text-anchor="middle" x="415" y="50">7</text><rect class="list" height="50" width="40" x="435" y="25" /><text dy=".3em" text-anchor="middle" x="455" y="50">7</text><rect class="highlight" height="60" rx="5" ry="5" width="50" x="430" y="20" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="4">
        def append_twice(a_list, val):
            a_list.append(val)
            a_list.append(val)
            return

        nums = [1, 2, 3]
        append_twice(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id65" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id65)" /><rect class="frame" height="200" opacity="0.25" rx="20" ry="20" width="200" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="0.25" text-anchor="middle" x="125" y="125">append_twice</text><polygon class="name" opacity="0.25" points="78,150 193.75,150 200,175 193.75,200 78,200" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="135.875" y="175">a_list</text><path class="arrow" d="M 200,175 C 236,175 236,148 237,112 C 238,76 238,50 275,50" fill="none" marker-end="url(#id65)" opacity="0.25" /><polygon class="name" opacity="0.25" points="114,225 193.75,225 200,250 193.75,275 114,275" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="153.875" y="250">val</text><circle class="int value" cx="300" cy="250" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="250">7</text><path class="arrow" d="M 200,250 C 218,250 218,250 237,250 C 256,250 256,250 275,250" fill="none" marker-end="url(#id65)" opacity="0.25" /><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><rect class="list" height="50" width="40" x="395" y="25" /><text dy=".3em" text-anchor="middle" x="415" y="50">7</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><rect class="list" height="50" width="40" x="395" y="25" /><text dy=".3em" text-anchor="middle" x="415" y="50">7</text><rect class="list" height="50" width="40" x="435" y="25" /><text dy=".3em" text-anchor="middle" x="455" y="50">7</text></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="4">
        def append_twice(a_list, val):
            a_list.append(val)
            a_list.append(val)
            return

        nums = [1, 2, 3]
        append_twice(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id66" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id66)" /><circle class="int value" cx="300" cy="250" opacity="0.25" r="25" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="300" y="250">7</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><rect class="list" height="50" width="40" x="395" y="25" /><text dy=".3em" text-anchor="middle" x="415" y="50">7</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><rect class="list" height="50" width="40" x="395" y="25" /><text dy=".3em" text-anchor="middle" x="415" y="50">7</text><rect class="list" height="50" width="40" x="435" y="25" /><text dy=".3em" text-anchor="middle" x="455" y="50">7</text></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="8">
        def append_twice(a_list, val):
            a_list.append(val)
            a_list.append(val)
            return

        nums = [1, 2, 3]
        append_twice(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id67" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="102,25 193.75,25 200,50 193.75,75 102,75" /><text dy=".3em" text-anchor="middle" x="147.875" y="50">nums</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><path class="arrow" d="M 200,50 C 218,50 218,50 237,50 C 256,50 256,50 275,50" fill="none" marker-end="url(#id67)" /><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><rect class="list" height="50" width="40" x="395" y="25" /><text dy=".3em" text-anchor="middle" x="415" y="50">7</text><rect class="list" height="50" width="40" x="275" y="25" /><text dy=".3em" text-anchor="middle" x="295" y="50">1</text><rect class="list" height="50" width="40" x="315" y="25" /><text dy=".3em" text-anchor="middle" x="335" y="50">2</text><rect class="list" height="50" width="40" x="355" y="25" /><text dy=".3em" text-anchor="middle" x="375" y="50">3</text><rect class="list" height="50" width="40" x="395" y="25" /><text dy=".3em" text-anchor="middle" x="415" y="50">7</text><rect class="list" height="50" width="40" x="435" y="25" /><text dy=".3em" text-anchor="middle" x="455" y="50">7</text></svg>
    </div>
    </div>
    </div>
    <!-- }}} -->
    <!--[[[end]]]-->
</div>

<div class="text"><!-- {{{ -->

<p>Let's try to write a useful function.  We want to append a value twice to a
list.  We'll write it three different ways.  Two of them work (but
differently), and one is completely useless.  It will be instructive to
understand why the three versions behave differently.</p>

<p>Here is our first version of append_twice:</p>

<code lang="py">
def append_twice(a_list, val):
    a_list.append(val)
    a_list.append(val)
</code>

<p>This is very simple, and does exactly what it claims to do.</p>

<p>We call it like this:</p>

<code lang="py">
nums = [1, 2, 3]
append_twice(nums, 7)
print(nums)         # [1, 2, 3, 7, 7]
</code>

<p>When we call append_twice, we pass it nums.  This assigns nums to the
parameter a_list, so now there are two names for the list, nums in the caller,
and a_list in the append_twice function.  Then we append val onto the list
twice.  These appends work on a_list, which is the same list as nums in the
caller, so we are directly modifying the caller's list.</p>

<p>When the function ends, the frame is destroyed, which removes the local name
a_list.  Since that wasn't the only reference to the list, removing the name
a_list doesn't reclaim the list itself.</p>

<p>Back in the caller, we print the nums list, and see that it has indeed
been modified.</p>

</div><!-- }}} -->

<div class="slide">
    <!--[[[cog
    code = '''\
        def append_twice_bad(a_list, val):
            a_list = a_list + [val, val]
            return

        nums = [1, 2, 3]
        append_twice_bad(nums, 7)
        print(nums)         # [1, 2, 3]
        '''

    def figure(frame):
        fig = make_pyfig(size=(550,325), frame_num=frame, name_right=230)

        n_nums = auto_name(fig, "nums")
        l_nums = fig.list(texts=["1", "2", "3"], pos=fig.val_for_name(n_nums))
        fig.reference(n_nums, l_nums[0])
        
        fig.frame(pos=fig.next_frame(), size=(230,200), text="append_twice_bad", rise=2, set=6, fade=1)
        n_a_list = auto_name(fig, "a_list", rise=2, set=5)
        fig.reference(n_a_list, l_nums[0])
        n_val = auto_name(fig, "val", rise=2, set=6, fade=1)
        i_val = fig.int(pos=fig.val_for_name(n_val), text="7", rise=2, set=7, fade=1)
        fig.reference(n_val, i_val)

        n_a_list = fig.name(center=n_a_list.center, size=n_a_list.size, text="a_list", rise=5, set=6, fade=1)
        l_a_list = fig.list(texts=["1", "2", "3", "7", "7"], pos=fig.val_for_name(n_a_list), rise=4, set=7, fade=1)
        fig.highlight(box=l_a_list.box, rise=4, set=5)
        fig.reference(n_a_list, l_a_list[0])
        fig.highlight(box=n_a_list, rise=5, set=6)

        cog.outl(fig.tostring())

    pyfig_animation(code, figure, [5, (6, 1), 1, 2, 2, 3, 3, 7])
    ]]]-->
    <!-- Animation {{{ -->
    <div class="overlay_container">
    <div class="overlay">
    <pre class="python tophalf">
        def append_twice_bad(a_list, val):
            a_list = a_list + [val, val]
            return

        nums = [1, 2, 3]
        append_twice_bad(nums, 7)
        print(nums)         # [1, 2, 3]
        </pre>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="5">
        def append_twice_bad(a_list, val):
            a_list = a_list + [val, val]
            return

        nums = [1, 2, 3]
        append_twice_bad(nums, 7)
        print(nums)         # [1, 2, 3]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id68" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><rect class="list" height="50" width="40" x="305" y="25" /><text dy=".3em" text-anchor="middle" x="325" y="50">1</text><rect class="list" height="50" width="40" x="345" y="25" /><text dy=".3em" text-anchor="middle" x="365" y="50">2</text><rect class="list" height="50" width="40" x="385" y="25" /><text dy=".3em" text-anchor="middle" x="405" y="50">3</text><path class="arrow" d="M 230,50 C 248,50 248,50 267,50 C 286,50 286,50 305,50" fill="none" marker-end="url(#id68)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="6,1">
        def append_twice_bad(a_list, val):
            a_list = a_list + [val, val]
            return

        nums = [1, 2, 3]
        append_twice_bad(nums, 7)
        print(nums)         # [1, 2, 3]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id69" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><rect class="list" height="50" width="40" x="305" y="25" /><text dy=".3em" text-anchor="middle" x="325" y="50">1</text><rect class="list" height="50" width="40" x="345" y="25" /><text dy=".3em" text-anchor="middle" x="365" y="50">2</text><rect class="list" height="50" width="40" x="385" y="25" /><text dy=".3em" text-anchor="middle" x="405" y="50">3</text><path class="arrow" d="M 230,50 C 248,50 248,50 267,50 C 286,50 286,50 305,50" fill="none" marker-end="url(#id69)" /><rect class="frame" height="200" rx="20" ry="20" width="230" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="140" y="125">append_twice_bad</text><polygon class="name" points="108,150 223.75,150 230,175 223.75,200 108,200" /><text dy=".3em" text-anchor="middle" x="165.875" y="175">a_list</text><path class="arrow" d="M 230,175 C 266,175 266,148 267,112 C 268,76 268,50 305,50" fill="none" marker-end="url(#id69)" /><polygon class="name" points="144,225 223.75,225 230,250 223.75,275 144,275" /><text dy=".3em" text-anchor="middle" x="183.875" y="250">val</text><circle class="int value" cx="330" cy="250" r="25" /><text dy=".3em" text-anchor="middle" x="330" y="250">7</text><path class="arrow" d="M 230,250 C 248,250 248,250 267,250 C 286,250 286,250 305,250" fill="none" marker-end="url(#id69)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="1">
        def append_twice_bad(a_list, val):
            a_list = a_list + [val, val]
            return

        nums = [1, 2, 3]
        append_twice_bad(nums, 7)
        print(nums)         # [1, 2, 3]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id70" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><rect class="list" height="50" width="40" x="305" y="25" /><text dy=".3em" text-anchor="middle" x="325" y="50">1</text><rect class="list" height="50" width="40" x="345" y="25" /><text dy=".3em" text-anchor="middle" x="365" y="50">2</text><rect class="list" height="50" width="40" x="385" y="25" /><text dy=".3em" text-anchor="middle" x="405" y="50">3</text><path class="arrow" d="M 230,50 C 248,50 248,50 267,50 C 286,50 286,50 305,50" fill="none" marker-end="url(#id70)" /><rect class="frame" height="200" rx="20" ry="20" width="230" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="140" y="125">append_twice_bad</text><polygon class="name" points="108,150 223.75,150 230,175 223.75,200 108,200" /><text dy=".3em" text-anchor="middle" x="165.875" y="175">a_list</text><path class="arrow" d="M 230,175 C 266,175 266,148 267,112 C 268,76 268,50 305,50" fill="none" marker-end="url(#id70)" /><polygon class="name" points="144,225 223.75,225 230,250 223.75,275 144,275" /><text dy=".3em" text-anchor="middle" x="183.875" y="250">val</text><circle class="int value" cx="330" cy="250" r="25" /><text dy=".3em" text-anchor="middle" x="330" y="250">7</text><path class="arrow" d="M 230,250 C 248,250 248,250 267,250 C 286,250 286,250 305,250" fill="none" marker-end="url(#id70)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        def append_twice_bad(a_list, val):
            a_list = a_list + [val, val]
            return

        nums = [1, 2, 3]
        append_twice_bad(nums, 7)
        print(nums)         # [1, 2, 3]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id71" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><rect class="list" height="50" width="40" x="305" y="25" /><text dy=".3em" text-anchor="middle" x="325" y="50">1</text><rect class="list" height="50" width="40" x="345" y="25" /><text dy=".3em" text-anchor="middle" x="365" y="50">2</text><rect class="list" height="50" width="40" x="385" y="25" /><text dy=".3em" text-anchor="middle" x="405" y="50">3</text><path class="arrow" d="M 230,50 C 248,50 248,50 267,50 C 286,50 286,50 305,50" fill="none" marker-end="url(#id71)" /><rect class="frame" height="200" rx="20" ry="20" width="230" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="140" y="125">append_twice_bad</text><polygon class="name" points="108,150 223.75,150 230,175 223.75,200 108,200" /><text dy=".3em" text-anchor="middle" x="165.875" y="175">a_list</text><path class="arrow" d="M 230,175 C 266,175 266,148 267,112 C 268,76 268,50 305,50" fill="none" marker-end="url(#id71)" /><polygon class="name" points="144,225 223.75,225 230,250 223.75,275 144,275" /><text dy=".3em" text-anchor="middle" x="183.875" y="250">val</text><circle class="int value" cx="330" cy="250" r="25" /><text dy=".3em" text-anchor="middle" x="330" y="250">7</text><path class="arrow" d="M 230,250 C 248,250 248,250 267,250 C 286,250 286,250 305,250" fill="none" marker-end="url(#id71)" /><rect class="list" height="50" width="40" x="305" y="150" /><text dy=".3em" text-anchor="middle" x="325" y="175">1</text><rect class="list" height="50" width="40" x="345" y="150" /><text dy=".3em" text-anchor="middle" x="365" y="175">2</text><rect class="list" height="50" width="40" x="385" y="150" /><text dy=".3em" text-anchor="middle" x="405" y="175">3</text><rect class="list" height="50" width="40" x="425" y="150" /><text dy=".3em" text-anchor="middle" x="445" y="175">7</text><rect class="list" height="50" width="40" x="465" y="150" /><text dy=".3em" text-anchor="middle" x="485" y="175">7</text><rect class="highlight" height="60" rx="5" ry="5" width="210" x="300" y="145" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        def append_twice_bad(a_list, val):
            a_list = a_list + [val, val]
            return

        nums = [1, 2, 3]
        append_twice_bad(nums, 7)
        print(nums)         # [1, 2, 3]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id72" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><rect class="list" height="50" width="40" x="305" y="25" /><text dy=".3em" text-anchor="middle" x="325" y="50">1</text><rect class="list" height="50" width="40" x="345" y="25" /><text dy=".3em" text-anchor="middle" x="365" y="50">2</text><rect class="list" height="50" width="40" x="385" y="25" /><text dy=".3em" text-anchor="middle" x="405" y="50">3</text><path class="arrow" d="M 230,50 C 248,50 248,50 267,50 C 286,50 286,50 305,50" fill="none" marker-end="url(#id72)" /><rect class="frame" height="200" rx="20" ry="20" width="230" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="140" y="125">append_twice_bad</text><polygon class="name" points="144,225 223.75,225 230,250 223.75,275 144,275" /><text dy=".3em" text-anchor="middle" x="183.875" y="250">val</text><circle class="int value" cx="330" cy="250" r="25" /><text dy=".3em" text-anchor="middle" x="330" y="250">7</text><path class="arrow" d="M 230,250 C 248,250 248,250 267,250 C 286,250 286,250 305,250" fill="none" marker-end="url(#id72)" /><polygon class="name" points="108,150 223.75,150 230,175 223.75,200 108,200" /><text dy=".3em" text-anchor="middle" x="165.875" y="175">a_list</text><rect class="list" height="50" width="40" x="305" y="150" /><text dy=".3em" text-anchor="middle" x="325" y="175">1</text><rect class="list" height="50" width="40" x="345" y="150" /><text dy=".3em" text-anchor="middle" x="365" y="175">2</text><rect class="list" height="50" width="40" x="385" y="150" /><text dy=".3em" text-anchor="middle" x="405" y="175">3</text><rect class="list" height="50" width="40" x="425" y="150" /><text dy=".3em" text-anchor="middle" x="445" y="175">7</text><rect class="list" height="50" width="40" x="465" y="150" /><text dy=".3em" text-anchor="middle" x="485" y="175">7</text><path class="arrow" d="M 230,175 C 248,175 248,175 267,175 C 286,175 286,175 305,175" fill="none" marker-end="url(#id72)" /><rect class="highlight" height="60" rx="5" ry="5" width="132" x="103" y="145" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="3">
        def append_twice_bad(a_list, val):
            a_list = a_list + [val, val]
            return

        nums = [1, 2, 3]
        append_twice_bad(nums, 7)
        print(nums)         # [1, 2, 3]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id73" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><rect class="list" height="50" width="40" x="305" y="25" /><text dy=".3em" text-anchor="middle" x="325" y="50">1</text><rect class="list" height="50" width="40" x="345" y="25" /><text dy=".3em" text-anchor="middle" x="365" y="50">2</text><rect class="list" height="50" width="40" x="385" y="25" /><text dy=".3em" text-anchor="middle" x="405" y="50">3</text><path class="arrow" d="M 230,50 C 248,50 248,50 267,50 C 286,50 286,50 305,50" fill="none" marker-end="url(#id73)" /><rect class="frame" height="200" opacity="0.25" rx="20" ry="20" width="230" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="0.25" text-anchor="middle" x="140" y="125">append_twice_bad</text><polygon class="name" opacity="0.25" points="144,225 223.75,225 230,250 223.75,275 144,275" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="183.875" y="250">val</text><circle class="int value" cx="330" cy="250" r="25" /><text dy=".3em" text-anchor="middle" x="330" y="250">7</text><path class="arrow" d="M 230,250 C 248,250 248,250 267,250 C 286,250 286,250 305,250" fill="none" marker-end="url(#id73)" opacity="0.25" /><polygon class="name" opacity="0.25" points="108,150 223.75,150 230,175 223.75,200 108,200" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="165.875" y="175">a_list</text><rect class="list" height="50" width="40" x="305" y="150" /><text dy=".3em" text-anchor="middle" x="325" y="175">1</text><rect class="list" height="50" width="40" x="345" y="150" /><text dy=".3em" text-anchor="middle" x="365" y="175">2</text><rect class="list" height="50" width="40" x="385" y="150" /><text dy=".3em" text-anchor="middle" x="405" y="175">3</text><rect class="list" height="50" width="40" x="425" y="150" /><text dy=".3em" text-anchor="middle" x="445" y="175">7</text><rect class="list" height="50" width="40" x="465" y="150" /><text dy=".3em" text-anchor="middle" x="485" y="175">7</text><path class="arrow" d="M 230,175 C 248,175 248,175 267,175 C 286,175 286,175 305,175" fill="none" marker-end="url(#id73)" opacity="0.25" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="3">
        def append_twice_bad(a_list, val):
            a_list = a_list + [val, val]
            return

        nums = [1, 2, 3]
        append_twice_bad(nums, 7)
        print(nums)         # [1, 2, 3]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id74" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><rect class="list" height="50" width="40" x="305" y="25" /><text dy=".3em" text-anchor="middle" x="325" y="50">1</text><rect class="list" height="50" width="40" x="345" y="25" /><text dy=".3em" text-anchor="middle" x="365" y="50">2</text><rect class="list" height="50" width="40" x="385" y="25" /><text dy=".3em" text-anchor="middle" x="405" y="50">3</text><path class="arrow" d="M 230,50 C 248,50 248,50 267,50 C 286,50 286,50 305,50" fill="none" marker-end="url(#id74)" /><circle class="int value" cx="330" cy="250" opacity="0.25" r="25" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="330" y="250">7</text><rect class="list" height="50" opacity="0.25" width="40" x="305" y="150" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="325" y="175">1</text><rect class="list" height="50" opacity="0.25" width="40" x="345" y="150" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="365" y="175">2</text><rect class="list" height="50" opacity="0.25" width="40" x="385" y="150" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="405" y="175">3</text><rect class="list" height="50" opacity="0.25" width="40" x="425" y="150" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="445" y="175">7</text><rect class="list" height="50" opacity="0.25" width="40" x="465" y="150" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="485" y="175">7</text></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="7">
        def append_twice_bad(a_list, val):
            a_list = a_list + [val, val]
            return

        nums = [1, 2, 3]
        append_twice_bad(nums, 7)
        print(nums)         # [1, 2, 3]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id75" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><rect class="list" height="50" width="40" x="305" y="25" /><text dy=".3em" text-anchor="middle" x="325" y="50">1</text><rect class="list" height="50" width="40" x="345" y="25" /><text dy=".3em" text-anchor="middle" x="365" y="50">2</text><rect class="list" height="50" width="40" x="385" y="25" /><text dy=".3em" text-anchor="middle" x="405" y="50">3</text><path class="arrow" d="M 230,50 C 248,50 248,50 267,50 C 286,50 286,50 305,50" fill="none" marker-end="url(#id75)" /></svg>
    </div>
    </div>
    </div>
    <!-- }}} -->
    <!--[[[end]]]-->
</div>

<div class="text"><!-- {{{ -->

<p>Now let's try a different implementation:</p>

<code lang="py">
def append_twice_bad(a_list, val):
    a_list = a_list + [val, val]
    return

nums = [1, 2, 3]
append_twice_bad(nums, 7)
print(nums)         # [1, 2, 3]
</code>

<p>Here we take another approach: inside the function, we extend the list by
adding two values to the original list.  But this function doesn't work at all.
As before, we pass nums into the function, so we have both a_list and nums
referring to the original list.  But then we create an entirely new list, and
assign it to a_list.</p>

<p>When the function ends, the frame is destroyed, and the name a_list along
with it.  The new augemented list was only referred to by a_list, so it is also
reclaimed.  All of our work is lost!</p>

<p>Back in the caller, we see no effect at all, because the original list was
never modified. The impulse here was good: functions that modify values passed
into them are good ways to get unexpected aliasing bugs.  Making new lists can
avoid these problems. Luckily, there's an easy thing we can do to make this
function useful.</p>

</div><!-- }}} -->


<div class="slide">
    <!--[[[cog
    code = '''\
        def append_twice_good(a_list, val):
            a_list = a_list + [val, val]
            return a_list

        nums = [1, 2, 3]
        nums = append_twice_good(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        '''

    def figure(frame):
        fig = make_pyfig(size=(550,325), frame_num=frame, name_right=230)

        n_nums = auto_name(fig, "nums")
        l_nums = fig.list(texts=["1", "2", "3"], pos=fig.val_for_name(n_nums), set=8, fade=1)
        fig.reference(n_nums, l_nums[0])
        
        the_frame = fig.frame(pos=fig.next_frame(), size=(230,200), text="append_twice_good", rise=2, set=7, fade=1)
        n_a_list = auto_name(fig, "a_list", rise=2, set=5)
        fig.reference(n_a_list, l_nums[0])
        n_val = auto_name(fig, "val", rise=2, set=6, fade=1)
        i_val = fig.int(pos=fig.val_for_name(n_val), text="7", rise=2, set=6, fade=1)
        fig.reference(n_val, i_val)

        n_a_list = fig.name(center=n_a_list.center, size=n_a_list.size, text="a_list", rise=5, set=6, fade=1)
        l_a_list = fig.list(texts=["1", "2", "3", "7", "7"], pos=fig.val_for_name(n_a_list), rise=4)
        fig.reference(n_a_list, l_a_list[0])

        n_return = fig.name(center=(the_frame.right, n_a_list.cy), size=(25,25), text="", rise=6, set=8)
        fig.reference(n_return, l_a_list[0])

        n_nums = fig.name(center=n_nums.center, size=n_nums.size, text="nums", rise=8)
        fig.reference(n_nums, l_a_list[0])

        cog.outl(fig.tostring())

    pyfig_animation(code, figure, [5, (6, 1), 1, 2, 2, 3, 6, 6, 7])
    ]]]-->
    <!-- Animation {{{ -->
    <div class="overlay_container">
    <div class="overlay">
    <pre class="python tophalf">
        def append_twice_good(a_list, val):
            a_list = a_list + [val, val]
            return a_list

        nums = [1, 2, 3]
        nums = append_twice_good(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="5">
        def append_twice_good(a_list, val):
            a_list = a_list + [val, val]
            return a_list

        nums = [1, 2, 3]
        nums = append_twice_good(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id76" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><rect class="list" height="50" width="40" x="305" y="25" /><text dy=".3em" text-anchor="middle" x="325" y="50">1</text><rect class="list" height="50" width="40" x="345" y="25" /><text dy=".3em" text-anchor="middle" x="365" y="50">2</text><rect class="list" height="50" width="40" x="385" y="25" /><text dy=".3em" text-anchor="middle" x="405" y="50">3</text><path class="arrow" d="M 230,50 C 248,50 248,50 267,50 C 286,50 286,50 305,50" fill="none" marker-end="url(#id76)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="6,1">
        def append_twice_good(a_list, val):
            a_list = a_list + [val, val]
            return a_list

        nums = [1, 2, 3]
        nums = append_twice_good(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id77" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><rect class="list" height="50" width="40" x="305" y="25" /><text dy=".3em" text-anchor="middle" x="325" y="50">1</text><rect class="list" height="50" width="40" x="345" y="25" /><text dy=".3em" text-anchor="middle" x="365" y="50">2</text><rect class="list" height="50" width="40" x="385" y="25" /><text dy=".3em" text-anchor="middle" x="405" y="50">3</text><path class="arrow" d="M 230,50 C 248,50 248,50 267,50 C 286,50 286,50 305,50" fill="none" marker-end="url(#id77)" /><rect class="frame" height="200" rx="20" ry="20" width="230" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="140" y="125">append_twice_good</text><polygon class="name" points="108,150 223.75,150 230,175 223.75,200 108,200" /><text dy=".3em" text-anchor="middle" x="165.875" y="175">a_list</text><path class="arrow" d="M 230,175 C 266,175 266,148 267,112 C 268,76 268,50 305,50" fill="none" marker-end="url(#id77)" /><polygon class="name" points="144,225 223.75,225 230,250 223.75,275 144,275" /><text dy=".3em" text-anchor="middle" x="183.875" y="250">val</text><circle class="int value" cx="330" cy="250" r="25" /><text dy=".3em" text-anchor="middle" x="330" y="250">7</text><path class="arrow" d="M 230,250 C 248,250 248,250 267,250 C 286,250 286,250 305,250" fill="none" marker-end="url(#id77)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="1">
        def append_twice_good(a_list, val):
            a_list = a_list + [val, val]
            return a_list

        nums = [1, 2, 3]
        nums = append_twice_good(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id78" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><rect class="list" height="50" width="40" x="305" y="25" /><text dy=".3em" text-anchor="middle" x="325" y="50">1</text><rect class="list" height="50" width="40" x="345" y="25" /><text dy=".3em" text-anchor="middle" x="365" y="50">2</text><rect class="list" height="50" width="40" x="385" y="25" /><text dy=".3em" text-anchor="middle" x="405" y="50">3</text><path class="arrow" d="M 230,50 C 248,50 248,50 267,50 C 286,50 286,50 305,50" fill="none" marker-end="url(#id78)" /><rect class="frame" height="200" rx="20" ry="20" width="230" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="140" y="125">append_twice_good</text><polygon class="name" points="108,150 223.75,150 230,175 223.75,200 108,200" /><text dy=".3em" text-anchor="middle" x="165.875" y="175">a_list</text><path class="arrow" d="M 230,175 C 266,175 266,148 267,112 C 268,76 268,50 305,50" fill="none" marker-end="url(#id78)" /><polygon class="name" points="144,225 223.75,225 230,250 223.75,275 144,275" /><text dy=".3em" text-anchor="middle" x="183.875" y="250">val</text><circle class="int value" cx="330" cy="250" r="25" /><text dy=".3em" text-anchor="middle" x="330" y="250">7</text><path class="arrow" d="M 230,250 C 248,250 248,250 267,250 C 286,250 286,250 305,250" fill="none" marker-end="url(#id78)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        def append_twice_good(a_list, val):
            a_list = a_list + [val, val]
            return a_list

        nums = [1, 2, 3]
        nums = append_twice_good(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id79" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><rect class="list" height="50" width="40" x="305" y="25" /><text dy=".3em" text-anchor="middle" x="325" y="50">1</text><rect class="list" height="50" width="40" x="345" y="25" /><text dy=".3em" text-anchor="middle" x="365" y="50">2</text><rect class="list" height="50" width="40" x="385" y="25" /><text dy=".3em" text-anchor="middle" x="405" y="50">3</text><path class="arrow" d="M 230,50 C 248,50 248,50 267,50 C 286,50 286,50 305,50" fill="none" marker-end="url(#id79)" /><rect class="frame" height="200" rx="20" ry="20" width="230" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="140" y="125">append_twice_good</text><polygon class="name" points="108,150 223.75,150 230,175 223.75,200 108,200" /><text dy=".3em" text-anchor="middle" x="165.875" y="175">a_list</text><path class="arrow" d="M 230,175 C 266,175 266,148 267,112 C 268,76 268,50 305,50" fill="none" marker-end="url(#id79)" /><polygon class="name" points="144,225 223.75,225 230,250 223.75,275 144,275" /><text dy=".3em" text-anchor="middle" x="183.875" y="250">val</text><circle class="int value" cx="330" cy="250" r="25" /><text dy=".3em" text-anchor="middle" x="330" y="250">7</text><path class="arrow" d="M 230,250 C 248,250 248,250 267,250 C 286,250 286,250 305,250" fill="none" marker-end="url(#id79)" /><rect class="list" height="50" width="40" x="305" y="150" /><text dy=".3em" text-anchor="middle" x="325" y="175">1</text><rect class="list" height="50" width="40" x="345" y="150" /><text dy=".3em" text-anchor="middle" x="365" y="175">2</text><rect class="list" height="50" width="40" x="385" y="150" /><text dy=".3em" text-anchor="middle" x="405" y="175">3</text><rect class="list" height="50" width="40" x="425" y="150" /><text dy=".3em" text-anchor="middle" x="445" y="175">7</text><rect class="list" height="50" width="40" x="465" y="150" /><text dy=".3em" text-anchor="middle" x="485" y="175">7</text></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        def append_twice_good(a_list, val):
            a_list = a_list + [val, val]
            return a_list

        nums = [1, 2, 3]
        nums = append_twice_good(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id80" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><rect class="list" height="50" width="40" x="305" y="25" /><text dy=".3em" text-anchor="middle" x="325" y="50">1</text><rect class="list" height="50" width="40" x="345" y="25" /><text dy=".3em" text-anchor="middle" x="365" y="50">2</text><rect class="list" height="50" width="40" x="385" y="25" /><text dy=".3em" text-anchor="middle" x="405" y="50">3</text><path class="arrow" d="M 230,50 C 248,50 248,50 267,50 C 286,50 286,50 305,50" fill="none" marker-end="url(#id80)" /><rect class="frame" height="200" rx="20" ry="20" width="230" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="140" y="125">append_twice_good</text><polygon class="name" points="144,225 223.75,225 230,250 223.75,275 144,275" /><text dy=".3em" text-anchor="middle" x="183.875" y="250">val</text><circle class="int value" cx="330" cy="250" r="25" /><text dy=".3em" text-anchor="middle" x="330" y="250">7</text><path class="arrow" d="M 230,250 C 248,250 248,250 267,250 C 286,250 286,250 305,250" fill="none" marker-end="url(#id80)" /><polygon class="name" points="108,150 223.75,150 230,175 223.75,200 108,200" /><text dy=".3em" text-anchor="middle" x="165.875" y="175">a_list</text><rect class="list" height="50" width="40" x="305" y="150" /><text dy=".3em" text-anchor="middle" x="325" y="175">1</text><rect class="list" height="50" width="40" x="345" y="150" /><text dy=".3em" text-anchor="middle" x="365" y="175">2</text><rect class="list" height="50" width="40" x="385" y="150" /><text dy=".3em" text-anchor="middle" x="405" y="175">3</text><rect class="list" height="50" width="40" x="425" y="150" /><text dy=".3em" text-anchor="middle" x="445" y="175">7</text><rect class="list" height="50" width="40" x="465" y="150" /><text dy=".3em" text-anchor="middle" x="485" y="175">7</text><path class="arrow" d="M 230,175 C 248,175 248,175 267,175 C 286,175 286,175 305,175" fill="none" marker-end="url(#id80)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="3">
        def append_twice_good(a_list, val):
            a_list = a_list + [val, val]
            return a_list

        nums = [1, 2, 3]
        nums = append_twice_good(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id81" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><rect class="list" height="50" width="40" x="305" y="25" /><text dy=".3em" text-anchor="middle" x="325" y="50">1</text><rect class="list" height="50" width="40" x="345" y="25" /><text dy=".3em" text-anchor="middle" x="365" y="50">2</text><rect class="list" height="50" width="40" x="385" y="25" /><text dy=".3em" text-anchor="middle" x="405" y="50">3</text><path class="arrow" d="M 230,50 C 248,50 248,50 267,50 C 286,50 286,50 305,50" fill="none" marker-end="url(#id81)" /><rect class="frame" height="200" rx="20" ry="20" width="230" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="140" y="125">append_twice_good</text><polygon class="name" opacity="0.25" points="144,225 223.75,225 230,250 223.75,275 144,275" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="183.875" y="250">val</text><circle class="int value" cx="330" cy="250" opacity="0.25" r="25" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="330" y="250">7</text><path class="arrow" d="M 230,250 C 248,250 248,250 267,250 C 286,250 286,250 305,250" fill="none" marker-end="url(#id81)" opacity="0.25" /><polygon class="name" opacity="0.25" points="108,150 223.75,150 230,175 223.75,200 108,200" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="165.875" y="175">a_list</text><rect class="list" height="50" width="40" x="305" y="150" /><text dy=".3em" text-anchor="middle" x="325" y="175">1</text><rect class="list" height="50" width="40" x="345" y="150" /><text dy=".3em" text-anchor="middle" x="365" y="175">2</text><rect class="list" height="50" width="40" x="385" y="150" /><text dy=".3em" text-anchor="middle" x="405" y="175">3</text><rect class="list" height="50" width="40" x="425" y="150" /><text dy=".3em" text-anchor="middle" x="445" y="175">7</text><rect class="list" height="50" width="40" x="465" y="150" /><text dy=".3em" text-anchor="middle" x="485" y="175">7</text><path class="arrow" d="M 230,175 C 248,175 248,175 267,175 C 286,175 286,175 305,175" fill="none" marker-end="url(#id81)" opacity="0.25" /><polygon class="name" points="242.5,162.5 264.375,162.5 267.5,175 264.375,187.5 242.5,187.5" /><path class="arrow" d="M 267,175 C 276,175 276,175 286,175 C 295,175 295,175 305,175" fill="none" marker-end="url(#id81)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="6">
        def append_twice_good(a_list, val):
            a_list = a_list + [val, val]
            return a_list

        nums = [1, 2, 3]
        nums = append_twice_good(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id82" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><rect class="list" height="50" width="40" x="305" y="25" /><text dy=".3em" text-anchor="middle" x="325" y="50">1</text><rect class="list" height="50" width="40" x="345" y="25" /><text dy=".3em" text-anchor="middle" x="365" y="50">2</text><rect class="list" height="50" width="40" x="385" y="25" /><text dy=".3em" text-anchor="middle" x="405" y="50">3</text><path class="arrow" d="M 230,50 C 248,50 248,50 267,50 C 286,50 286,50 305,50" fill="none" marker-end="url(#id82)" /><rect class="frame" height="200" opacity="0.25" rx="20" ry="20" width="230" x="25" y="100" /><text class="framelabel" dy=".3em" opacity="0.25" text-anchor="middle" x="140" y="125">append_twice_good</text><rect class="list" height="50" width="40" x="305" y="150" /><text dy=".3em" text-anchor="middle" x="325" y="175">1</text><rect class="list" height="50" width="40" x="345" y="150" /><text dy=".3em" text-anchor="middle" x="365" y="175">2</text><rect class="list" height="50" width="40" x="385" y="150" /><text dy=".3em" text-anchor="middle" x="405" y="175">3</text><rect class="list" height="50" width="40" x="425" y="150" /><text dy=".3em" text-anchor="middle" x="445" y="175">7</text><rect class="list" height="50" width="40" x="465" y="150" /><text dy=".3em" text-anchor="middle" x="485" y="175">7</text><polygon class="name" points="242.5,162.5 264.375,162.5 267.5,175 264.375,187.5 242.5,187.5" /><path class="arrow" d="M 267,175 C 276,175 276,175 286,175 C 295,175 295,175 305,175" fill="none" marker-end="url(#id82)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="6">
        def append_twice_good(a_list, val):
            a_list = a_list + [val, val]
            return a_list

        nums = [1, 2, 3]
        nums = append_twice_good(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id83" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><rect class="list" height="50" opacity="0.25" width="40" x="305" y="25" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="325" y="50">1</text><rect class="list" height="50" opacity="0.25" width="40" x="345" y="25" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="365" y="50">2</text><rect class="list" height="50" opacity="0.25" width="40" x="385" y="25" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="405" y="50">3</text><path class="arrow" d="M 230,50 C 248,50 248,50 267,50 C 286,50 286,50 305,50" fill="none" marker-end="url(#id83)" opacity="0.25" /><rect class="list" height="50" width="40" x="305" y="150" /><text dy=".3em" text-anchor="middle" x="325" y="175">1</text><rect class="list" height="50" width="40" x="345" y="150" /><text dy=".3em" text-anchor="middle" x="365" y="175">2</text><rect class="list" height="50" width="40" x="385" y="150" /><text dy=".3em" text-anchor="middle" x="405" y="175">3</text><rect class="list" height="50" width="40" x="425" y="150" /><text dy=".3em" text-anchor="middle" x="445" y="175">7</text><rect class="list" height="50" width="40" x="465" y="150" /><text dy=".3em" text-anchor="middle" x="485" y="175">7</text><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><path class="arrow" d="M 230,50 C 266,50 266,76 267,112 C 268,148 268,175 305,175" fill="none" marker-end="url(#id83)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="7">
        def append_twice_good(a_list, val):
            a_list = a_list + [val, val]
            return a_list

        nums = [1, 2, 3]
        nums = append_twice_good(nums, 7)
        print(nums)         # [1, 2, 3, 7, 7]
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="550" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id84" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><rect class="list" height="50" width="40" x="305" y="150" /><text dy=".3em" text-anchor="middle" x="325" y="175">1</text><rect class="list" height="50" width="40" x="345" y="150" /><text dy=".3em" text-anchor="middle" x="365" y="175">2</text><rect class="list" height="50" width="40" x="385" y="150" /><text dy=".3em" text-anchor="middle" x="405" y="175">3</text><rect class="list" height="50" width="40" x="425" y="150" /><text dy=".3em" text-anchor="middle" x="445" y="175">7</text><rect class="list" height="50" width="40" x="465" y="150" /><text dy=".3em" text-anchor="middle" x="485" y="175">7</text><polygon class="name" points="132,25 223.75,25 230,50 223.75,75 132,75" /><text dy=".3em" text-anchor="middle" x="177.875" y="50">nums</text><path class="arrow" d="M 230,50 C 266,50 266,76 267,112 C 268,148 268,175 305,175" fill="none" marker-end="url(#id84)" /></svg>
    </div>
    </div>
    </div>
    <!-- }}} -->
    <!--[[[end]]]-->
</div>

<div class="text"><!-- {{{ -->

<p>Here we have nearly the same function, but once we've made our new a_list,
we return it:</p>

<code lang="py">
def append_twice_good(a_list, val):
    a_list = a_list + [val, val]
    return a_list

nums = [1, 2, 3]
nums = append_twice_good(nums, 7)
print(nums)         # [1, 2, 3, 7, 7]
 </code>

<p>Then in the caller, we don't simply call append_twice_good, we assign its
return value to nums again.  The function has made a new list, and by returning
it, we can decide what to do with it. In this case, we want nums to be the new
list, so we simply assign it to nums.  The old value is reclaimed, and the new
value remains.</p>

</div><!-- }}} -->

<div class="slide">
    <h1>Three append_twice functions</h1>
    <pre class="python">
        def append_twice(a_list, val):
            """Mutates argument."""
            a_list.append(val)
            a_list.append(val)
    </pre>
    <pre class="python">
        def append_twice_bad(a_list, val):
            """Useless!"""
            a_list = a_list + [val, val]
    </pre>
    <pre class="python">
        def append_twice_good(a_list, val):
            """Returns new list."""
            a_list = a_list + [val, val]
            return a_list
    </pre>
</div>

<div class="text"><!-- {{{ -->

<p>Here are the three versions of the function, for comparison.  The first
function mutates the list in-place.  The second version makes a new list but
fails to do anything useful with it.  The third version makes a new list, and
returns it so that we can use it.</p>

</div><!-- }}} -->

<div class="slide">
    <h1>Any name &rarr; any value @ any time</h1>
    <p>Dynamic typing</p>
    <!--[[[cog
    code = '''\
        x = 12
        x = "hello"
        x = [1, 2, 3]
        x[1] = "two"
        '''

    def figure(frame):
        fig = make_pyfig(size=(500,325), frame_num=frame)

        x0 = auto_name(fig, "", set=0)
        x = auto_name(fig, "x", set=2)
        x2 = auto_name(fig, "", set=0)
        x3 = auto_name(fig, "", set=0)

        i_12 = fig.int(pos=fig.val_for_name(x0), text="12", set=2, fade=10)
        fig.reference(x, i_12)
        x = fig.name(center=x.center, size=x.size, text="x", rise=2, set=3)
        s_hello = fig.string(pos=fig.val_for_name(x), text=repr("hello"), size=(130,50), rise=2, set=3, fade=10)
        fig.reference(x, s_hello)
        x = fig.name(center=x.center, size=x.size, text="x", rise=3)
        l_123 = fig.list(pos=fig.val_for_name(x2), texts="123", rise=3)
        fig.reference(x, l_123[0])
        l_1s3 = fig.list(pos=fig.val_for_name(x2), texts="1 3", rise=4)
        fig.reference(x, l_1s3[0])
        s_two = fig.string(center=(l_123[1].cx, x3.cy), text=repr("two"), size=(100, 50), rise=4)
        fig.connect(l_1s3[1].center, 90, s_two.north, 90, class_="arrow", start_marker=fig.DOT, rise=4)

        cog.outl(fig.tostring())

    pyfig_animation(code, figure, [])
    ]]]-->
    <!-- Animation {{{ -->
    <div class="overlay_container">
    <div class="overlay">
    <pre class="python tophalf">
        x = 12
        x = "hello"
        x = [1, 2, 3]
        x[1] = "two"
        </pre>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="1">
        x = 12
        x = "hello"
        x = [1, 2, 3]
        x[1] = "two"
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id85" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id86" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><polygon class="name" points="138,100 193.75,100 200,125 193.75,150 138,150" /><text dy=".3em" text-anchor="middle" x="165.875" y="125">x</text><circle class="int value" cx="300" cy="50" r="25" /><text dy=".3em" text-anchor="middle" x="300" y="50">12</text><path class="arrow" d="M 200,125 C 226,125 230,112 237,87 C 244,62 248,50 275,50" fill="none" marker-end="url(#id85)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="2">
        x = 12
        x = "hello"
        x = [1, 2, 3]
        x[1] = "two"
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id87" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id88" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><circle class="int value" cx="300" cy="50" opacity="0.25" r="25" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="300" y="50">12</text><polygon class="name" points="138,100 193.75,100 200,125 193.75,150 138,150" /><text dy=".3em" text-anchor="middle" x="165.875" y="125">x</text><rect class="string value" height="50" rx="25" ry="25" width="130" x="275" y="100" /><text dy=".3em" text-anchor="middle" x="340" y="125">'hello'</text><path class="arrow" d="M 200,125 C 218,125 218,125 237,125 C 256,125 256,125 275,125" fill="none" marker-end="url(#id87)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="3">
        x = 12
        x = "hello"
        x = [1, 2, 3]
        x[1] = "two"
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id89" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id90" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><circle class="int value" cx="300" cy="50" opacity="0.25" r="25" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="300" y="50">12</text><rect class="string value" height="50" opacity="0.25" rx="25" ry="25" width="130" x="275" y="100" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="340" y="125">'hello'</text><polygon class="name" points="138,100 193.75,100 200,125 193.75,150 138,150" /><text dy=".3em" text-anchor="middle" x="165.875" y="125">x</text><rect class="list" height="50" width="40" x="275" y="175" /><text dy=".3em" text-anchor="middle" x="295" y="200">1</text><rect class="list" height="50" width="40" x="315" y="175" /><text dy=".3em" text-anchor="middle" x="335" y="200">2</text><rect class="list" height="50" width="40" x="355" y="175" /><text dy=".3em" text-anchor="middle" x="375" y="200">3</text><path class="arrow" d="M 200,125 C 226,125 230,137 237,162 C 244,187 248,200 275,200" fill="none" marker-end="url(#id89)" /></svg>
    </div>
    </div>
    <div class="overlay incremental">
    <pre class="python tophalf" select="4">
        x = 12
        x = "hello"
        x = [1, 2, 3]
        x[1] = "two"
        </pre>
    <div class="opaque bottomhalf" style="text-align:center">
    <svg baseProfile="full" height="325" version="1.1" width="500" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id91" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker><marker id="id92" markerHeight="4" markerWidth="4" orient="auto" refX="2" refY="2" viewBox="0,0,4,4"><circle cx="2" cy="2" fill="black" r="2" stroke="none" /></marker></defs><circle class="int value" cx="300" cy="50" opacity="0.25" r="25" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="300" y="50">12</text><rect class="string value" height="50" opacity="0.25" rx="25" ry="25" width="130" x="275" y="100" /><text dy=".3em" opacity="0.25" text-anchor="middle" x="340" y="125">'hello'</text><polygon class="name" points="138,100 193.75,100 200,125 193.75,150 138,150" /><text dy=".3em" text-anchor="middle" x="165.875" y="125">x</text><rect class="list" height="50" width="40" x="275" y="175" /><text dy=".3em" text-anchor="middle" x="295" y="200">1</text><rect class="list" height="50" width="40" x="315" y="175" /><text dy=".3em" text-anchor="middle" x="335" y="200">2</text><rect class="list" height="50" width="40" x="355" y="175" /><text dy=".3em" text-anchor="middle" x="375" y="200">3</text><path class="arrow" d="M 200,125 C 226,125 230,137 237,162 C 244,187 248,200 275,200" fill="none" marker-end="url(#id91)" /><rect class="list" height="50" width="40" x="275" y="175" /><text dy=".3em" text-anchor="middle" x="295" y="200">1</text><rect class="list" height="50" width="40" x="315" y="175" /><text dy=".3em" text-anchor="middle" x="335" y="200"> </text><rect class="list" height="50" width="40" x="355" y="175" /><text dy=".3em" text-anchor="middle" x="375" y="200">3</text><path class="arrow" d="M 200,125 C 226,125 230,137 237,162 C 244,187 248,200 275,200" fill="none" marker-end="url(#id91)" /><rect class="string value" height="50" rx="25" ry="25" width="100" x="285" y="250" /><text dy=".3em" text-anchor="middle" x="335" y="275">'two'</text><path class="arrow" d="M 335,200 C 335,212 335,212 335,225 C 335,237 335,237 335,250" fill="none" marker-end="url(#id91)" marker-start="url(#id92)" /></svg>
    </div>
    </div>
    </div>
    <!-- }}} -->
    <!--[[[end]]]-->
</div>

<div class="text"><!-- {{{ -->

<p>Python is dynamically typed, which means that names have no type.  Any name
can refer to any value at any time.  A name can refer to an integer, and then
to a string, and then to a function, and then to a module.  Of course, this
could be a very confusing program, and you shouldn't do it, but the Python
language won't mind.</p>

</div><!-- }}} -->

<div class="slide">
    <h1 style="margin-bottom:0">Names have no type</h1>
    <h1 style="margin-top:0;text-align:right">Values have no scope</h1>
    <div class="opaque" style="text-align:center">
        <!--[[[cog
            # Random figure!
            fig = make_pyfig(size=(400,500), scale=0.55, val_gap=175)

            r = random.Random(14)   # seeded to make it pretty good.

            def rand_name():
                return "".join(r.choice(string.lowercase) for i in range(r.randint(3,7)))

            def lightly_shuffle(seq):
                """Reorder a list randomly, but don't move things too far."""
                numbered = list(enumerate(seq))
                def jitter(p):
                    return p[0]+r.randint(-3,3)
                shuffled = [x for i,x in sorted(numbered, key=jitter)]
                return shuffled

            names = []
            for i in range(r.randint(2,3)):
                names.append(auto_name(fig, rand_name()))

            for f in range(3):
                num_vars = r.randint(2,3)
                fig.frame(pos=fig.next_frame(), size=(200,50+75*num_vars), text="func_"+rand_name())
                for i in range(num_vars):
                    names.append(auto_name(fig, rand_name()))
                fig.end_frame()

            values = []
            for name in names:
                pos = fig.val_for_name(name)
                type = r.choice(['int']*2 + ['string']*4 + ['list']*8)
                if type == 'int':
                    val = fig.int(pos=pos, text=str(r.randint(5,20)))
                elif type == 'string':
                    s = rand_name()
                    val = fig.string(pos=pos, text=repr(s), size=(70+10*len(s), 50))
                elif type == 'list':
                    els = r.randint(4, 10)
                    val = fig.list(pos=pos, texts=[str(r.randint(5,20)) for i in range(els)])
                    val = val[0]
                values.append(val)

            # Mix things up
            shuffled = lightly_shuffle(names)

            for name, val in zip(shuffled, values):
                fig.reference(name, val)

            cog.out(fig.tostring())
        ]]]-->
        <svg baseProfile="full" height="500" version="1.1" width="400" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><marker id="id93" markerHeight="10" markerWidth="10" orient="auto" refX="10" refY="5" viewBox="0,0,10,10"><path d="M 0,0 L 10,5 L 0,10 L 1,5 z" fill="black" stroke="none" /></marker></defs><g transform="scale(0.55)"><polygon class="name" points="78,25 193.75,25 200,50 193.75,75 78,75" /><text dy=".3em" text-anchor="middle" x="135.875" y="50">qyhgtr</text><polygon class="name" points="102,100 193.75,100 200,125 193.75,150 102,150" /><text dy=".3em" text-anchor="middle" x="147.875" y="125">rkud</text><rect class="frame" height="200" rx="20" ry="20" width="200" x="25" y="175" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="125" y="200">func_jguqdor</text><polygon class="name" points="114,225 193.75,225 200,250 193.75,275 114,275" /><text dy=".3em" text-anchor="middle" x="153.875" y="250">qdi</text><polygon class="name" points="114,300 193.75,300 200,325 193.75,350 114,350" /><text dy=".3em" text-anchor="middle" x="153.875" y="325">fzk</text><rect class="frame" height="275" rx="20" ry="20" width="200" x="25" y="400" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="125" y="425">func_pwrcp</text><polygon class="name" points="78,450 193.75,450 200,475 193.75,500 78,500" /><text dy=".3em" text-anchor="middle" x="135.875" y="475">ecwnfl</text><polygon class="name" points="102,525 193.75,525 200,550 193.75,575 102,575" /><text dy=".3em" text-anchor="middle" x="147.875" y="550">uncv</text><polygon class="name" points="114,600 193.75,600 200,625 193.75,650 114,650" /><text dy=".3em" text-anchor="middle" x="153.875" y="625">hat</text><rect class="frame" height="200" rx="20" ry="20" width="200" x="25" y="700" /><text class="framelabel" dy=".3em" opacity="1" text-anchor="middle" x="125" y="725">func_cmrnl</text><polygon class="name" points="90,750 193.75,750 200,775 193.75,800 90,800" /><text dy=".3em" text-anchor="middle" x="141.875" y="775">lpcmg</text><polygon class="name" points="66,825 193.75,825 200,850 193.75,875 66,875" /><text dy=".3em" text-anchor="middle" x="129.875" y="850">ybdsoas</text><rect class="list" height="50" width="40" x="375" y="25" /><text dy=".3em" text-anchor="middle" x="395" y="50">10</text><rect class="list" height="50" width="40" x="415" y="25" /><text dy=".3em" text-anchor="middle" x="435" y="50">14</text><rect class="list" height="50" width="40" x="455" y="25" /><text dy=".3em" text-anchor="middle" x="475" y="50">20</text><rect class="list" height="50" width="40" x="495" y="25" /><text dy=".3em" text-anchor="middle" x="515" y="50">9</text><rect class="list" height="50" width="40" x="535" y="25" /><text dy=".3em" text-anchor="middle" x="555" y="50">9</text><rect class="list" height="50" width="40" x="575" y="25" /><text dy=".3em" text-anchor="middle" x="595" y="50">8</text><rect class="list" height="50" width="40" x="375" y="100" /><text dy=".3em" text-anchor="middle" x="395" y="125">9</text><rect class="list" height="50" width="40" x="415" y="100" /><text dy=".3em" text-anchor="middle" x="435" y="125">11</text><rect class="list" height="50" width="40" x="455" y="100" /><text dy=".3em" text-anchor="middle" x="475" y="125">5</text><rect class="list" height="50" width="40" x="495" y="100" /><text dy=".3em" text-anchor="middle" x="515" y="125">9</text><rect class="list" height="50" width="40" x="535" y="100" /><text dy=".3em" text-anchor="middle" x="555" y="125">20</text><rect class="list" height="50" width="40" x="575" y="100" /><text dy=".3em" text-anchor="middle" x="595" y="125">14</text><rect class="list" height="50" width="40" x="615" y="100" /><text dy=".3em" text-anchor="middle" x="635" y="125">9</text><rect class="list" height="50" width="40" x="375" y="225" /><text dy=".3em" text-anchor="middle" x="395" y="250">9</text><rect class="list" height="50" width="40" x="415" y="225" /><text dy=".3em" text-anchor="middle" x="435" y="250">5</text><rect class="list" height="50" width="40" x="455" y="225" /><text dy=".3em" text-anchor="middle" x="475" y="250">7</text><rect class="list" height="50" width="40" x="495" y="225" /><text dy=".3em" text-anchor="middle" x="515" y="250">8</text><rect class="list" height="50" width="40" x="535" y="225" /><text dy=".3em" text-anchor="middle" x="555" y="250">8</text><rect class="list" height="50" width="40" x="575" y="225" /><text dy=".3em" text-anchor="middle" x="595" y="250">18</text><rect class="string value" height="50" rx="25" ry="25" width="110" x="375" y="300" /><text dy=".3em" text-anchor="middle" x="430" y="325">'pxht'</text><rect class="string value" height="50" rx="25" ry="25" width="120" x="375" y="450" /><text dy=".3em" text-anchor="middle" x="435" y="475">'pytnv'</text><rect class="string value" height="50" rx="25" ry="25" width="110" x="375" y="525" /><text dy=".3em" text-anchor="middle" x="430" y="550">'youi'</text><rect class="list" height="50" width="40" x="375" y="600" /><text dy=".3em" text-anchor="middle" x="395" y="625">8</text><rect class="list" height="50" width="40" x="415" y="600" /><text dy=".3em" text-anchor="middle" x="435" y="625">19</text><rect class="list" height="50" width="40" x="455" y="600" /><text dy=".3em" text-anchor="middle" x="475" y="625">12</text><rect class="list" height="50" width="40" x="495" y="600" /><text dy=".3em" text-anchor="middle" x="515" y="625">10</text><rect class="list" height="50" width="40" x="535" y="600" /><text dy=".3em" text-anchor="middle" x="555" y="625">9</text><rect class="list" height="50" width="40" x="575" y="600" /><text dy=".3em" text-anchor="middle" x="595" y="625">6</text><rect class="list" height="50" width="40" x="615" y="600" /><text dy=".3em" text-anchor="middle" x="635" y="625">8</text><rect class="list" height="50" width="40" x="655" y="600" /><text dy=".3em" text-anchor="middle" x="675" y="625">16</text><circle class="int value" cx="400" cy="775" r="25" /><text dy=".3em" text-anchor="middle" x="400" y="775">9</text><rect class="list" height="50" width="40" x="375" y="825" /><text dy=".3em" text-anchor="middle" x="395" y="850">11</text><rect class="list" height="50" width="40" x="415" y="825" /><text dy=".3em" text-anchor="middle" x="435" y="850">17</text><rect class="list" height="50" width="40" x="455" y="825" /><text dy=".3em" text-anchor="middle" x="475" y="850">9</text><rect class="list" height="50" width="40" x="495" y="825" /><text dy=".3em" text-anchor="middle" x="515" y="850">10</text><rect class="list" height="50" width="40" x="535" y="825" /><text dy=".3em" text-anchor="middle" x="555" y="850">11</text><rect class="list" height="50" width="40" x="575" y="825" /><text dy=".3em" text-anchor="middle" x="595" y="850">7</text><rect class="list" height="50" width="40" x="615" y="825" /><text dy=".3em" text-anchor="middle" x="635" y="850">8</text><path class="arrow" d="M 200,50 C 243,50 243,50 287,50 C 331,50 331,50 375,50" fill="none" marker-end="url(#id93)" /><path class="arrow" d="M 200,250 C 253,250 261,234 287,187 C 313,140 321,125 375,125" fill="none" marker-end="url(#id93)" /><path class="arrow" d="M 200,475 C 271,475 277,433 287,362 C 297,291 303,250 375,250" fill="none" marker-end="url(#id93)" /><path class="arrow" d="M 200,125 C 266,125 273,159 287,225 C 301,290 308,325 375,325" fill="none" marker-end="url(#id93)" /><path class="arrow" d="M 200,325 C 257,325 266,346 287,400 C 308,453 317,475 375,475" fill="none" marker-end="url(#id93)" /><path class="arrow" d="M 200,550 C 243,550 243,550 287,550 C 331,550 331,550 375,550" fill="none" marker-end="url(#id93)" /><path class="arrow" d="M 200,775 C 257,775 266,753 287,700 C 308,646 317,625 375,625" fill="none" marker-end="url(#id93)" /><path class="arrow" d="M 200,625 C 257,625 266,646 287,700 C 308,753 317,775 375,775" fill="none" marker-end="url(#id93)" /><path class="arrow" d="M 200,850 C 243,850 243,850 287,850 C 331,850 331,850 375,850" fill="none" marker-end="url(#id93)" /></g></svg>
        <!--[[[end]]]-->
    </div>
</div>

<div class="text"><!-- {{{ -->

<p>Just as names have no type, values have no scope.  When we say that a
function has a local variable, we mean that the name is scoped to the function:
you can't use the name outside the function, and when the function returns, the
name is destroyed.  But as we've seen, if the name's value has other
references, it will live on beyond the function call.  It is a local name, not
a local value.</p>

<p>Values can be created, used, and ultimately destroyed all up and down the 
call stack.  There is no rule about when values can be created, and how long
they can live.</p>

</div><!-- }}} -->

<div class="slide">
    <h1>Other topics</h1>
    <ul>
    <li class="incremental">"Python has no variables." <b>Ugh!</b></li>
    <li class="incremental">Call-by-value or call-by-reference?</li>
    <li class="incremental">Making a 2D list:
        <pre class="python">
        board = [[0] * 8] * 8                # bad
        board = [[0] * 8 for _ in range(8)]  # good
        </pre>
    </li>
    <li class="incremental">Try pythontutor.com!</li>
    </ul>
</div>

<div class="text"><!-- {{{ -->

<p>Here are a number of quick topics that I didn't have time to cover in depth.</p>

<p><strong>"Python has no variables"</strong>  In all honesty, the original
reason I started writing this talk was because I would see people try to
explain how Python works by saying that Python has no variables.  This is
obviously wrong.  What they mean is that Python variables work differently than
variables in C, though even that statement is hard to understand.</p>

<p>At one time, teaching Python pretty much meant teaching it to people who
knew C.  That need is dwindling over time.  But even if we are dealing with
many C refugees, there's no reason to let C own the word "variable", leaving
Python to come up with some other word.  It's OK for two languages to use the
same word in slightly different ways.</p>

<p>Thankfully, this mantra is falling out of favor!</p>

<p><strong>Call by value or call by reference?</strong>  People also get tangled
up trying to explain whether Python uses call by value, or call by reference.
The answer is: neither.  This is a false dichotomy, again because people are
trying to mis-apply concepts from one language onto all languages.</p>

<p>Python uses a calling convention a little different from either pure call by
value or pure call by reference.  Some people call it call by object, or call
by assignment.</p>

<p><strong>Making a 2D list:</strong> the simple way to make a nested list
(let's say an 8x8 board for checkers) doesn't work.  You get a list of eight zeros,
but the outer list has eight references to that single list, rather than eight
seperate lists of zeros.  The second form gives you the correct structure.
You can read more about that in this blog post: 
<a href="blog/201308/names_and_values_making_a_game_board.html">Names and values: making a game board</a>.
</p>

<p><strong>pythontutor.com</strong> is a site that lets you enter your own
Python code, and it will diagram and animate its behavior.  The diagrams aren't
as pretty as mine, but it works on your code!</p>

</div><!-- }}} -->

<div class="slide title" data-layout="clean">
    <h1 style="padding-top: 0em">Questions?</h1>
    <div style="height: 60%;float: left">
        <img src="refer_madness.jpg" style="height: 80%; border: 1px solid #888"/>
        <p style="font-size: 60%"><i>Thanks, Craig Swanson&nbsp;&nbsp; http://perspicuity.com</i></p>
    </div>
    <h2 style="margin-top: 5em"><span class="punct">@</span>nedbat</h2>
    <h2><span class="punct">http://</span>bit.ly<span class="punct">/</span>pynames1</h2>
</div>

<div class="text"><!-- {{{ -->

<p>Thanks for your attention, I hope this has been helpful.</p>

<p>Python's mechanisms are very simple, often simpler than people believe.
Understand them, and your programs will not surprise you in bad ways!</p>

</div><!-- }}} -->


<!-- ** Layouts {{{ -->
<div class="layout" data-name="default">
    <content></content>
    <div class="footer">
        <span class="left">bit.ly<span class='punct'>/</span>pynames1</span>
        <span class="right"><span class='punct'>@</span>nedbat</span>
        <hr class="defloat" />
    </div>
</div>

<div class="layout nofooter" name="clean" data-name="clean">
    <content></content>
</div>


</body>
</html>
